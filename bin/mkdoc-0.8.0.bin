#!/usr/bin/env tclsh
##############################################################################
#
#  Author        : Dr. Detlef Groth
#  Created By    : Dr. Detlef Groth
#  Created       : Tue Sep 7 17:58:32 2021
#  Last Modified : <220303.0625>
#
#  Description	 : Standalone deployment tool for Tcl apps using uncompressed tar archives.
#
#  Notes         : - tpack application code comes at the end
#                  - no extra package are required, tar package is embedded 
#
#  History       : 2021-09-10 - release 0.1   (two file applications)
#                  2021-11-09 - release 0.2.0 (single file application)
#                  2021-11-26 - release 0.2.1 (tar package fix)
#                  2022-02-16 - release 0.3.0 (lz4 compression support)
#                  
#	
##############################################################################
#
#  Copyright (c) 2021-2022 Dr. Detlef Groth.
# 
#  License:      MIT
# 
##############################################################################

# tar.tcl -- take form tar.tcl from tcllib
#
#       Creating, extracting, and listing posix tar archives
#
# Copyright (c) 2004    Aaron Faupell <afaupell@users.sourceforge.net>
# Copyright (c) 2013    Andreas Kupries <andreas_kupries@users.sourceforge.net>
#                       (GNU tar @LongLink support).
#
# See the file "license.terms" for information on usage and redistribution
# of this file, and for a DISCLAIMER OF ALL WARRANTIES.
# 
# RCS: @(#) $Id: tar.tcl,v 1.17 2012/09/11 17:22:24 andreas_kupries Exp $

package require Tcl 8.4
package provide tar 0.11

namespace eval ::tar {}

proc ::tar::parseOpts {acc opts} {
    array set flags $acc
    foreach {x y} $acc {upvar $x $x}
    
    set len [llength $opts]
    set i 0
    while {$i < $len} {
        set name [string trimleft [lindex $opts $i] -]
        if {![info exists flags($name)]} {
	    return -errorcode {TAR INVALID OPTION} \
		-code error "unknown option \"$name\""
	}
        if {$flags($name) == 1} {
            set $name [lindex $opts [expr {$i + 1}]]
            incr i $flags($name)
        } elseif {$flags($name) > 1} {
            set $name [lrange $opts [expr {$i + 1}] [expr {$i + $flags($name)}]]
            incr i $flags($name)
        } else {
            set $name 1
        }
        incr i
    }
}

proc ::tar::pad {size} {
    set pad [expr {512 - ($size % 512)}]
    if {$pad == 512} {return 0}
    return $pad
}

proc ::tar::seekorskip {ch off wh} {
    if {[tell $ch] < 0} {
	if {$wh!="current"} {
	    return -code error -errorcode [list TAR INVALID WHENCE $wh] \
		"WHENCE=$wh not supported on non-seekable channel $ch"
	}
	skip $ch $off
	return
    }
    seek $ch $off $wh
    return
}

proc ::tar::readHeader {data} {
    binary scan $data a100a8a8a8a12a12a8a1a100a6a2a32a32a8a8a155 \
                      name mode uid gid size mtime cksum type \
                      linkname magic version uname gname devmajor devminor prefix

    foreach x {name type linkname} {
        set $x [string trim [set $x] "\x00"]
    }
    foreach x {uid gid size mtime cksum} {
        set $x [format %d 0[string trim [set $x] " \x00"]]
    }
    set mode [string trim $mode " \x00"]

    if {$magic == "ustar "} {
        # gnu tar
        # not fully supported
        foreach x {uname gname prefix} {
            set $x [string trim [set $x] "\x00"]
        }
        foreach x {devmajor devminor} {
            set $x [format %d 0[string trim [set $x] " \x00"]]
        }
    } elseif {$magic == "ustar\x00"} {
        # posix tar
        foreach x {uname gname prefix} {
            set $x [string trim [set $x] "\x00"]
        }
        foreach x {devmajor devminor} {
            set $x [format %d 0[string trim [set $x] " \x00"]]
        }
    } else {
        # old style tar
        foreach x {uname gname devmajor devminor prefix} { set $x {} }
        if {$type == ""} {
            if {[string match */ $name]} {
                set type 5
            } else {
                set type 0
            }
        }
    }

    return [list name $name mode $mode uid $uid gid $gid size $size mtime $mtime \
                 cksum $cksum type $type linkname $linkname magic $magic \
                 version $version uname $uname gname $gname devmajor $devmajor \
                 devminor $devminor prefix $prefix]
}
proc ::tar::untar {tar args} {
    set nooverwrite 0
    set data 0
    set nomtime 0
    set noperms 0
    set chan 0
    parseOpts {dir 1 file 1 glob 1 nooverwrite 0 nomtime 0 noperms 0 chan 0} $args
    if {![info exists dir]} {set dir [pwd]}
    set pattern *
    if {[info exists file]} {
        set pattern [string map {* \\* ? \\? \\ \\\\ \[ \\\[ \] \\\]} $file]
    } elseif {[info exists glob]} {
        set pattern $glob
    }

    set ret {}
    if {$chan} {
	set fh $tar
    } else {
	set fh [::open $tar]
	fconfigure $fh -encoding binary -translation lf -eofchar {}
    }
    while {![eof $fh]} {
        array set header [readHeader [read $fh 512]]
	HandleLongLink $fh header
        if {$header(name) == ""} break
	if {$header(prefix) != ""} {append header(prefix) /}
        set name [string trimleft $header(prefix)$header(name) /]
        if {![string match $pattern $name] || ($nooverwrite && [file exists $name])} {
            seekorskip $fh [expr {$header(size) + [pad $header(size)]}] current
            continue
        }

        set name [file join $dir $name]
        if {![file isdirectory [file dirname $name]]} {
            file mkdir [file dirname $name]
            lappend ret [file dirname $name] {}
        }
        if {[string match {[0346]} $header(type)]} {
            if {[catch {::open $name w+} new]} {
                # sometimes if we dont have write permission we can still delete
                catch {file delete -force $name}
                set new [::open $name w+]
            }
            fconfigure $new -encoding binary -translation lf -eofchar {}
            fcopy $fh $new -size $header(size)
            close $new
            lappend ret $name $header(size)
        } elseif {$header(type) == 5} {
            file mkdir $name
            lappend ret $name {}
        } elseif {[string match {[12]} $header(type)] && $::tcl_platform(platform) == "unix"} {
            catch {file delete $name}
            if {![catch {file link [string map {1 -hard 2 -symbolic} $header(type)] $name $header(linkname)}]} {
                lappend ret $name {}
            }
        }
        seekorskip $fh [pad $header(size)] current
        if {![file exists $name]} continue

        if {$::tcl_platform(platform) == "unix"} {
            if {!$noperms} {
                catch {file attributes $name -permissions 0[string range $header(mode) 2 end]}
            }
            catch {file attributes $name -owner $header(uid) -group $header(gid)}
            catch {file attributes $name -owner $header(uname) -group $header(gname)}
        }
        if {!$nomtime} {
            file mtime $name $header(mtime)
        }
    }
    if {!$chan} {
	close $fh
    }
    return $ret
}
proc ::tar::HandleLongLink {fh hv} {
    upvar 1 $hv header thelongname thelongname

    # @LongName Part I.
    if {$header(type) == "L"} {
	# Size == Length of name. Read it, and pad to full 512
	# size.  After that is a regular header for the actual
	# file, where we have to insert the name. This is handled
	# by the next iteration and the part II below.
	set thelongname [string trimright [read $fh $header(size)] \000]
	seekorskip $fh [pad $header(size)] current
	return -code continue
    }
    # Not supported yet: type 'K' for LongLink (long symbolic links).

    # @LongName, part II, get data from previous entry, if defined.
    if {[info exists thelongname]} {
	set header(name) $thelongname
	# Prevent leakage to further entries.
	unset thelongname
    }

    return
}

# lz4unpack.tcl -- take lz4unpack from wiki
namespace eval ::lz4 {
    variable version 0.2.4
    # The following variable will be true in Jim Tcl and false in Tcl 8.x.
    variable jim [expr {![catch {info version}]}]
}

if {$::lz4::jim} {
    proc ::lz4::byte-range {bytes start end} {
        tailcall string byterange $bytes $start $end
    }
} else {
    # Benchmarking shows this version to be faster than a tailcall in Tcl 8.6.7.
    proc ::lz4::byte-range {bytes start end} {
        return [string range $bytes $start $end]
    }
}

proc ::lz4::decode-block {data ptr endPtr window} {
    set result {}
    while 1 {
        if {![binary scan $data "@$ptr cu" token]} {
            error {data truncated}
        }
        incr ptr 1
        set litLen   [expr {($token >> 4) & 0x0F}]
        set matchLen [expr {$token & 0x0F}]
        if {$litLen == 15} {
            while 1 {
                if {![binary scan $data "@$ptr cu" byte]} {
                    error {data truncated}
                }
                incr ptr 1
                incr litLen $byte
                if {$byte < 255} break
            }
        }
        if {![binary scan $data "@$ptr a$litLen" literals]} {
            error {data truncated}
        }
        incr ptr $litLen
        append window $literals
        append result $literals
        # The last sequence is incomplete.
        if {$ptr < $endPtr} {
            if {![binary scan $data "@$ptr su" offset]} {
                error {data truncated}
            }
            incr ptr 2
            if {$matchLen == 15} {
                while 1 {
                    if {![binary scan $data "@$ptr cu" byte]} {
                        error {data truncated}
                    }
                    incr ptr 1
                    incr matchLen $byte
                    if {$byte < 255} break
                }
            }
            incr matchLen 4
            incr offset -1
            set endOffset [expr {
                $offset - $matchLen > 0 ? $offset - $matchLen : 0
            }]
            set overlapLen [expr {
                $offset - $matchLen > 0 ? 0 : $matchLen - $offset
            }]
            set match [byte-range $window end-$offset end-$endOffset]
            set matchRepeated [string repeat $match [expr {
                ($overlapLen / ($offset - $endOffset + 1)) + 2
            }]]
            set matchWithOverlap [byte-range $matchRepeated 0 $matchLen-1]
            append window $matchWithOverlap
            append result $matchWithOverlap
        }
        if {$ptr == $endPtr} break
        if {$ptr > $endPtr} {
            error {read beyond block end}
        }
    }
    return [list $ptr $window $result]
}

proc ::lz4::decode-frame {data ptr verify} {
    # Decode and validate the header.
    if {![binary scan $data "@$ptr i" magic]} {
        error {data truncated}
    }
    incr ptr 4
    set fieldsStartPtr $ptr
    if {$magic == 0x184D2204} {
        # Normal frame.
    } elseif {(0x184D2A50 <= $magic) && ($magic <= 0x184D2A5F)} {
        # Skippable frame.
        if {![binary scan $data "@$ptr iu" frameSize]} {
            error {data truncated}
        }
        incr ptr 4
        incr ptr $frameSize
        return [list $ptr {}]
    } else {
        error "unexpected magic number: $magic"
    }
    set flags {}
    if {![binary scan $data "@$ptr cu cu" flags blockDescr]} {
        error {data truncated}
    }
    incr ptr 2
    set flagsReserved      [expr {($flags & 0b00000011) == 0}]
    set hasContentChecksum [expr {($flags & 0b00000100) == 0b00000100}]
    set hasContentSize     [expr {($flags & 0b00001000) == 0b00001000}]
    set hasBlockChecksums  [expr {($flags & 0b00010000) == 0b00010000}]
    set blockIndep         [expr {($flags & 0b00100000) == 0b00100000}]
    set version            [expr {($flags & 0b11000000) == 0b01000000}]
    if {!$flagsReserved} {
        error {FLG reserved bits aren't zero}
    }
    if {!$version} {
        error {frame version isn't "01"}
    }
    set blockDescrReserved [expr {($blockDescr & 0b10001111) == 0}]
    set blockMaxSize       [expr {$blockDescr >> 4}]
    if {!$blockDescrReserved} {
        error {BD reserved bits aren't zero}
    }
    if {$blockMaxSize < 4} {
        error "invalid block maximum size ($blockMaxSize < 4)"
    }
    if {$hasContentSize} {
        if {![binary scan $data "@$ptr wu" uncompressedSize]} {
            error {data truncated}
        }
        incr ptr 8
    }
    if {![binary scan $data "@$ptr cu" headerChecksum]} {
        error {data truncated}
    }
    if {$verify} {
        if {![binary scan $data \
                          "@$fieldsStartPtr a[expr {$ptr - $fieldsStartPtr}]" \
                          header]} {
            error {can't scan header fields to verify checksum\
                   (this shouldn't happen)}
        }
        if {(([::xxhash::xxhash32 $header 0] >> 8) & 0xff) != $headerChecksum} {
            error {frame header doesn't match checksum}
        }
    }
    incr ptr 1

    # Decode the blocks.
    set window {}
    while 1 {
        if {![binary scan $data "@$ptr iu" blockSize]} {
            error {data truncated}
        }
        incr ptr 4
        set compressed [expr {!($blockSize >> 31)}]
        set blockSize [expr {$blockSize & 0x7fffffff}] ;# Zero the highest bit.
        if {$blockSize == 0} break

        if {$compressed} {
            lassign [decode-block $data \
                                  $ptr \
                                  [expr {$ptr + $blockSize}] $window] \
                    ptr \
                    window \
                    decodedBlock
            if {$blockIndep} {
                set window {}
            } else {
                set window [string range $window end-0xFFFF end]
            }
        } else {
            if {![binary scan $data "@$ptr a$blockSize" decodedBlock]} {
                error {data truncated}
            }
            incr ptr $blockSize
        }
        append result $decodedBlock
    }

    # Decode the checksum.
    if {$hasContentChecksum} {
        if {![binary scan $data "@$ptr iu" contentChecksum]} {
            error {data truncated}
        }
        incr ptr 4
        if {$verify && ([::xxhash::xxhash32 $result 0] != $contentChecksum)} {
            error {decoded data doesn't match checksum}
        }
    }

    return [list $ptr $result]
}

proc ::lz4::decode {data verify} {
    if {$verify && ([info commands ::xxhash::xxhash32] eq {})} {
        error {asked to verify checksums but [::xxhash::xxhash32] is absent}
    }
    set ptr 0
    set result {}
    set len [string length $data]
    while {$ptr < $len} {
        lassign [decode-frame $data $ptr $verify] ptr frame
        append result $frame
    }
    return $result
}

proc ::lz4::assert-equal {actual expected} {
    if {$actual ne $expected} {
        if {[string length $actual] > 200} {
            set actual [string range $actual 0 199]...
        }
        if {[string length $expected] > 200} {
            set expected [string range $expected 0 199]...
        }
        error "expected \"$expected\",\n\
               but got \"$actual\""
    }
}

proc ::lz4::file-test {path canHash} {
    if {![file exists $path]} {
        puts stderr "can't find file \"$path\" -- skipping test"
        return
    }
    # Can't use -ignorestderr because Jim Tcl doesn't support it.
    if {[catch {exec lz4 --version 2>@1}]} {
        puts stderr {can't run lz4 -- skipping test}
        return
    }
    set ch [open $path rb]
    set data [read $ch]
    close $ch
    set ch [open [list |lz4 -c -9 $path]]
    fconfigure $ch -translation binary
    set dataCompressed [read $ch]
    close $ch
    assert-equal [decode $dataCompressed 0] $data
    if {$canHash} {
        assert-equal [decode $dataCompressed 1] $data
    }
}

proc ::lz4::value-test {compressed original canHash} {
    assert-equal [decode $compressed 0] $original
    if {$canHash} {
        assert-equal [decode $compressed 1] $original
    }
}

proc ::lz4::unzip {infile outfile {verify false}} {
    set ch [open $infile rb]
    set data [read $ch]
    close $ch
    set out [open $outfile w 0600]
    fconfigure $out -translation binary
    puts -nonewline $out [::lz4::decode $data $verify]
    close $out
}


package provide starkit 0.1

namespace eval starkit {
    proc startup { } {
        lappend ::auto_path [file join [file dirname [info script]] lib]
        return starkit
    }
}
proc getTempDir {} {
    if {[file exists /tmp]} {
        # standard UNIX
        return /tmp
    } elseif {[info exists ::env(TMP)]} {
        # Windows
        return $::env(TMP)
    } elseif {[info exists ::env(TEMP)]} {
        # Windows
        return $::env(TEMP)
    } elseif {[info exists ::env(TMPDIR)]} {
        # OSX
        return $::env(TMPDIR)
    }
}
set rname [file rootname [info script]]
set lzmode false
if {[llength [info commands ::lz4::*]] > 0}  {
    set lzmode true
}
if {[file exists $rname.vfs]} {
    catch {
        package forget tar
    }   
    source [file join $rname.vfs main.tcl]
} else {
    set tail [file tail $rname]
    set time [file mtime [info script]]
    set appname [info script]
    set tmpdir [getTempDir]
    set f [open $appname]
    fconfigure $f -translation binary
    set data [read $f][close $f]
    set ctrlz [string first \u001A $data]
    if {$ctrlz > 0} {
        # todo check file dates
        ## standalone file with attached tar archive
        set script [string range $data 0 [expr {$ctrlz - 2}]]
        set archive [string range $data [incr ctrlz] end]
        set scriptfile [file join $tmpdir [file rootname $appname].ttcl]
        set tarfile [file join $tmpdir [file tail [file rootname $appname]].ttar]
        set lzfile [file join $tmpdir [file tail [file rootname $appname]].ttar.lz4]
        set untar false
        if {[file exists $tarfile]} {
            set ttime [file mtime $tarfile]
            if {$ttime < $time} {
                # script is newer than tar file
                set untar true
            }
        } else {
            set untar true
        }
        if {$untar} {
            if {$lzmode} {
                if {[file exists $lzfile]} {
                    file delete $lzfile
                }
                set tmp [open $lzfile w 6000]
                fconfigure $tmp -translation binary
                puts -nonewline $tmp $archive
                close $tmp
                lz4::unzip $lzfile $tarfile
            } else {
                set tmp [open $tarfile w 0600]
                fconfigure $tmp -translation binary
                puts -nonewline $tmp $archive
                close $tmp
            }
        }
    } else {
        set tarfile [file rootname [info script]].ttar
        if {![file exists $tarfile]} {
            puts "Error: File $tarfile does not exists"
            exit 0
        }
    }
    set ttime [file mtime $tarfile]
    set appdir [file join $tmpdir $tail-$ttime]
    foreach dir [glob -nocomplain [file join $tmpdir $rname]*] {
        if {$dir ne $appdir && [file isdir $dir]} {
            file delete -force $dir
        } 
    }
    if {![file exists $appdir]} {
        file mkdir $appdir
        tar::untar $tarfile -dir $appdir
    }
    set vfspath [lindex [glob [file join $appdir *]] 0]
    catch {
        package forget tar
    }   
    if {[file exists [file join $vfspath tpack.tcl]]} {
        source [file join $vfspath tpack.tcl]
    } elseif {[file exists [file join $vfspath main.tcl]]} {
        source [file join $vfspath main.tcl]
    } else {
        error "Neither tpack.tcl or main.tcl found in tar archive!"
    }
    
}

## ARCHIVE LOADER END
#!/bin/sh
# -*- tcl -*- A Tcl comment, whose contents don't matter \
exec tclsh "$0" "$@"

package require Tcl 8.6
package require mkdoc

set Usage [string map [list "\n    " "\n"] {
    Usage: __APP__ ?[--help|version]? INFILE OUTFILE ?[--css file.css]?
           ?[--header header.html]? ?[--footer footer.html]?

    mkdoc - code documentation tool to process embedded Markdown markup
            given after "#'" comments

    Positional arguments (required):
    
        INFILE - input file with:
               - embedded Markdown comments: #' Markdown markup
               - pure Markdown code (file.md)

        OUTFILE - output file usually HTML or Markdown file,
                  file format is deduced on file extension .html or .md,
                  if OUTFILE is the `-` sign output is written to stdout

    Optional arguments:

        --help            - display this help page, and exit
        --version         - display version number, and exit
        --license         - display license information, and exit
        --css CSSFILE     - use the specified CSSFILE instead of internal default 
                            mkdoc.css
        --header HTMLFILE - file with HTML code to be included after the body tag
        --footer HTMLFILE - file with HTML code to be included before the closing
                            body tag                            
    Examples:

        # create manual page for mkdoc.tcl itself 
        __APP__ mkdoc.tcl mkdoc.html

        # create manual code for a CPP file using a custom style sheet
        __APP__ sample.cpp sample.html --css manual.css

        # extract code documentation as simple Markdown
        # ready to be processed further with pandoc
        __APP__ sample.cpp sample.md 

        # convert a Markdown file to HTML
        __APP__ sample.md sample.html
        
        # convert a Markdown file to HTML with own css, header and foot
        __APP__ sample.md sample.html --css my.css --footer foot.html --header head.html
        
    Author: @ Dr. Detlef Groth, Schwielowsee, 2019-2023

    License: BSD
}]

if {[lsearch -exact $argv {--version}] > -1} {
    puts "[package provide mkdoc]"
    return
}
if {[lsearch -exact $argv {--license}] > -1} {
    puts "BSD License - see manual page"
    return
}

if {[llength $argv] < 2 || [lsearch -exact $argv {--help}] > -1} {
    set usage [regsub -all {__APP__} $Usage [info script]]
    puts $usage
    exit 0
    
} elseif {[llength $argv] >= 2 && [lsearch $argv {--run}] == 1} {
    mkdoc::run $argv 
} elseif {[llength $argv] == 2} {
    if {[regexp {^-.} [lindex $argv 1]]} {
	puts stderr "Error: wrong outfile name [lindex $argv 1]"
	exit 1
    }
    mkdoc::mkdoc [lindex $argv 0] [lindex $argv 1]

} elseif {[llength $argv] > 2} {
    mkdoc::mkdoc {*}$argv
}

exit
return
"MdP¯	 ˇmkdoc.vfs/main.tcl  >ı 100600  1750    D77   ˇ14526077032 13073   0ä >  ﬂustar 00groth       §Ûlappend auto_path [file join ˇdirname [info script]] lib]
ˆ § ˜ Alib/  8n100644 S63675	 O5214 ˇUˇ# -*- mode: tcl ; fill-column: 80 -*-
# :≥
#  Author  ı: Dr. Detlef Groth
#  Created$ Ú2Fri Nov 15 10:20:22 2019
#  Last Modified : <231118.0909>
#
#  DeºÛ=ion	 : Command line utility and package to extract Markdown documentation 
#ú  ˇ/from programming code if embedded as after comment sequence #'S ¡manual pages¢ rinstallÖ Ò of Tcl files as èmodules.N 2CopË UadaptD Údgw/dgwutils.tcl4sHistory‡ :oˇ-11-08 version 0.1g * 2* 2* á20-02-26T 3* ˇ11-10 Release 0.4* 82-3* Ø5 (rox2md)3 w2-02-09] 6* G4-XX* Ø7 (minimal^ x3-09-074 ˇ .1 (img tag fix: W11-18: 8.0 
#	ô>Ú
# Copyright (c)Ò]2023 £Ò, E-mail: detlef(at)d'	Ò1(dot)de
# 
# This library is free software; you can use, modify,ÂÚ'redistribute it for
# any purpose, provided that existr¬ Ûnotices are retained in all
# copiRA Cthis3 Ò	 is included verbatim inÄ ò 1iondÊ ÷ 6 is% ˇged WITHOUT ANY WARRANTY; without even the implied
# warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
#>Ò' ---
#' title: +!:: ëπ
#' author:ÀÛ, Schwielowsee, Germany
#' cssJ G.csse Ò
#' <center> Manual: [short (doctools)]( Ú .html) - [long   -# #</T „
#'
#' ## NAME !**, ’ Q**  -NXand c6∏application.Êand format 
#'˘
I5bsource0Œ¶written inÇdor
#' h Qand o€±ally conver”it into HTML.È Ò## <a name='toc'></a>TABLE OF CONTENTS
èÙ'  - [SYNOPSIS](#synopsis) ˆ DESCRIPTION](#df" £COMMAND](#? !  \ u1](# ! írun](#run ı- [EXAMPLE](#example ÚBASIC FORMATTING](#í" ÉINSTALLA∑ S ÷SEE ALSO](#seX ˆCHANGES](#changeµTODO](#todoE íAUTHOR](#- ÒLICENSE AND COPYRIGHT](#licenso ü®w$'>åD</a>§ÑUsage asΩ:B d```
#' â requireΩ9
#' a input4out a?--cssf‚.css --header  É¢ --footer   \'Ç  --javaÇ	ˆ hilightjs|file1.js,file2.js?∑ 	Ÿ :Ø	y4for®		Æ	a	°s prefixedt[ `#'`!u˙ Kcode˛ ?.mdh“ "¬a	“ …æ wfile.mdªÜø o ∂— cghlighÀQname1] [name2˚ x(''>C÷ëësUÌ&or^Ø¥nd  as well5sl$thy˚ if desired.
#' Them ©inside the—{must beä1theé• character_ åTextenó  °determinesw ˚.ÉFD ˆs can bei either `.md` for˚ E r, `.man t Q or `] Chtmlwº dlatterwü gtcllibj r∂ ^ Î És to be õrI ˘ + " o ªÅis *.md*„- « k0 Qhtml*1Ûthere will be simply a#à≥a« Ato ae$ÄT´ `bS.tcl`~x≥directly usy consolË…íAn explanuÚ
on how to do this, is giv5Öe'[I5Òl#'>πî ë"— 3">  ≠1*inyoñÉC$?*Á2> EíKzéÌ•à _write> › c  to *± *Y 3, D}
ô  or HTMLit
#' > -¸ 1* -xmOÇ -Ä !- •	3 ofYM ˜2 ù°cssfile* i0 }Sis an® bile usú$*3 J º√Q 
1addz1 b beford ˜closing body tage =e 8 @	>pene  ∆A> If% 7.Ë4 isÍƒ ŒR is cç.S >” _ Chas ¸	nÅ 
™ˇA_#'_P1entÅg‰!edºbstoredh ”º_ø Ú_, *-mode* flag  (one of -html, -md, -pandoc) ‚#,õ … ∆h cs takeÂtƒAï,CFf#orä	`°) #Bdedu´∂v Dtype2Doverdgivingv `Ì ≠` or `-md`2
Sflagso √If as mode ``8Vbmarkupï)BtainFDYAML>2If ˛2 ha$ 9T.md (] ¥) or -man (Vh) thanh"toñå¢performed,n Ìàm "Inö6casÅ≤	˛"isf aLL(.; to>ístylesheeE©4ead_rdefaultß ,  - Cwith‘Ng3. Aë	WsincehV8.0 a7Eand Ø˝l Úis available to addqcode at˜ëbeginningf &enæ °+ÿEf:›>_"Í C.tcl
 MhtmlÑ % #md—\```

œ~Tcl 8.6 Myaml. / Hë Õ„
namespace eva≠ ± {
    vari]Òdeindent [list \n\t \n "\n    " \n]1  6 ıhtmltemplate [string map $P ¡{
	<!DOCTYPEöE>
	< £ead>
	<met∆Ò"viewport" content="width=device- ˚, initial-scale=1.0"H WtitleE $π( )0 Ÿ1  2 = >M "</ Å
	$style&/F    2 =T)
	</Ubody>8 / `) }Ñµ·yz M 1 M j    </w "</öm ühtmlstartÈÑh1 class) !h12) ]*  Z)</h2+ 9datS Cdate' ± &{ê≥ “Ù	{
	    margin-left: 10%; Crigh * Ù	font-family: Palatino, " © Linotype" ÛT STD", "Book Antiqua", Georgia, serifd 2maxÌ‰: 90%;
	}
	pre≠ 	É ëMonaco, Cn¢as, "Liber\±Mono", Menl$ ±urier, mono\ Bd} 

pr∏A$ {°_args}E ¶D
îÆ
 Ü
 Î
 ”array set arg‘[&""k a ú2 ""m
J Q$argsb Bif {a!ß$']] eq  ›·]} {
	return - ‘error "Error:t!an˝Ûmust have differen™} 1s!"ò } qset out	Ahtml ≥ ï 3 in(Å.md .man® (
Q J	S n !inm ˘ n !o R 	n Z 6sety"˜ ˜if [catch {
	opeç! r6 s} infh]¥O    ÉaCannotåÆ r: $infhj g} elseG 2set∞Ffals˚¬while {[gets@ Úa] >= 0∏ Û{[regexp {^\s*#' +#±± +"(.*)"} $‹3->  	ú 	C	   « 4 å r
		} i K ï$ 1: $U   , q#set ilÓS[readG x OBinfh= Q3  ë# ProcessÅ @%Z$ù .\nÿ -I Sclose… ! . Sif {$Î‹eq "code" && W?(.*)
/md∆ ,md√ z i"÷ U ﬂ 
 Îset yamldict \&[ § ≥C  "D‘·jCtailuÜrootname√>]]"N j> NN ”date   [clockS ¢seconds] -¸Œ "%Y-%m-%d"]J bcss   íqÚ p?  "§  ü â< ]¿!mdÄ2 Ayamlo
ø•Ltext3 hasyaml2  E0 c$ÎÑ Ulnr 0	qforeachÆñ [split $ó8\n"∆FÖncr lnr D  ıf {$lnr < 5 && !$Ï 	`3---XR
%6tru„∆^ &P] )		≈ #1!amerge — 1¡[yaml::yaml2  Wtext] 	” 
∆‘ i !0 3set„ıregsub -all {!\[\]\((.+?)\ÒÛ	"<img src=\"\\1\"></img>¶	 ≠Ó$îB	k≤À¸arg(--css) ne ""ˇ xset css ∫%cs∏J -",π∞ (—"<link rel=\"º˙sheet\" href=\"$cs\">ìΩ A    ˇ‚ rcss $csπ
·¯ Ó Mı , Deq "==tjs,î n ù;  ˜"https://unpkg.com/@ï Ú/cdn-assets@11.9.0/]Ú	/atom-one-light.min.css"S <Ú?srcn  å b bjs"></Q j  A!-- 2kˇ loaded extra --2  K  ú ﬂlanguages/tcl† IÅFize ‹ /jsü 	e>hljs.. oAll();Ô ∂I!jsIy îjîÇõüa a\"$js\:Åò
k í	üâ " $g ü
B Ëã!≥	T'sê5 _[H¬2 9 r]ù ›- ÷>nfh6 *
Ô Ô 5 Ô 2 Ô - Ô /¬	# RegeneratÛ~	F2nalA£(to report÷°nal CSS reTce)
	fF î"---\n"
	°k [lsort -R XFkeysW$]]oUÏC{k}:5 #gepI 1$k]h =}
	6 R---"
ô Ä! < &>$¡<ö>º
ÌŒn=tmlgpÅ 
è Acss]≈c ›‚} {
		# Switch\Àë (≠ernal linkı√ :cssÚª= åÚ[Markdown::convert $π
? a## fix+Åurly bra€*Òsues in backtickK chu≤ q l	mâB'\{"¢! {K…:'}]UJ œ(\[^'\]+)\}'T R\1'}]
 	_ΩÄjw 0644Ã#eyå¡/S$key); 
8J$keym 
ƒRif {!¸\§Odatem†ó d;g	Ö 	é^Û
[subst -nobackslashes -noÈ*2s $* 
P Aputsd 	ã{ü… B	¸	p í [ 	! 
ÑΩ Ê &seô√ 	ä ¿5out ¢Œœ U\ %	 ë 
" D}
}
y#ˆ#1run∫{*2-6runÚ#C%≥
#' > Sourc"hode in©4run"¿+ñ0!ƒ$ﬁ-Twith 
úÒation. Below follow#b %Swhich·Y #ruU m`tclsh™ëtcl --runT+—("a #">ñ,$5
#'(¢uts {Hello]   } SI am S ¥ & sojÄd {argvo»q[lindexï	2v 0∞˙rllength d] == 3B ©›? 2? ∂sset t 1;> ¸‡ bset ex\ê   Tk	¨h
∞,©	ã'ASif {$Â Aeq "ö1\
	 ∏1-noô!¿”\s+#{2,3}\s.+i ¬ 6_	á êá 	Ü Û"^\\s*#'.*\\s# demo: ƒ "á ßÜ ™ 	Bq ø\s+>?\s*```Ô  ä # â &!M:: $|é    brea 
#M!2 N8° 5(.+€O-> c>E <"$câõ
3	Uå ht > -1D    2  !upóÜidletask9 ¯&Î[expr {$t*1000Ø—    destroy .1 π üá'],'>2≥q
#' Fore+qmplete º"f/D t9‚ommands consul8Vbasic{¥syntax at [Pˇdaringfireball.net]( ≥/projects/mŸ/T Ú ). 
#' Here jus~ CmostÉ ‰essentials  to 	¸6m/bC-P;9Rnote,˙6Ò Qblockà[ëare separé;±by an emptyâ,A% Ω%isí2ingm'Ais a3 /≤and nothingÇ-1ì
#' **Tit„ÑAuthor**” ü⁄N setÚ%..
(Èin a so calledÿ'ÖTÄ*ç';0yused byª õBer [~) Q.org)πahandleX%3ous 5sí/rlater pãaing if49◊bct notá,'bu®<Bcode¢Eyourã	OA‰  5sÃÚnds with three hyphens.ài≤	 Ò'Ú:ñ≠=8@8& -F— oŸ'í!er‡'÷:Ö: ]8v á ·
#' Those fouräss produ¢
3two mon topŸ 3. YØ:aextendÒ ò‘would like to∏
Ü ◊Ò Ì	z¡other tools,ÇinstanceôPœ+ú(5
#'ñ êaspecif©I üÛf¢)£ by adding˚083ing9 "inêCion:>Te€\§css: tufte;:ã ú ÏBthe ›– 4 is†2q-!it -Åwo space5,~HÈsuóBader^<
b6Ùthe hash symbol, singl tQ±for level 1çìing, doub( e# 2# "et¯∆<theëÚ ı:so ˜@{ 3X 1ers˜,!re.QintenW=Ao beó21
#'Üëthe page ∫(c (h1),úQ (h3)@3 SE « A  #'µn!se.rname">S { œ4  ¢ °Some free e‡y/6theÛπ1#'  ë above ..¢ N=i1ÃDú:er.ì®%a√ ` `Õ9`Åfragment^ereaferÄ4/9'ed»%(.3the·ÒD ®!shå"on\4Ø 6and˘◊	1. L‹ õ!erÖreserved3 $!FList bC.!ei◊TusingW" o}s®aë•4ã√ #' - item 1 2 3]±!rersoutput:◊= L  I  F R
#' AX#al2
$be helpcvbj t(-$ofò,s< Köé ‰ D## T? C◊,$?∂ ú[Synopsisô= ÛDõ= $ C‚
ù= àa= Ç	sﬁ<ˆ<Ω ,(	b"in©¡mode a clickﬂ Qhyper¡Ilistºshowever⁄
üE1tar%'M"tmW{#soOŸ ∏6'|$'><b2</a> …Hí Œ 	Ö
332Ö a [LinkóW](URL2¿ALet'n&Ak to®‘Tcler's Wiki:' M  ^¸wiki.tcl-lang.org/g ê/s:C I/: ÉachievedùQthe g@5lr signÀ "#'∂±bbefore… " >_
Nbæï$ ú" $noU$èed again
Ü »Å 
Ï| ?1lso˛á,ed>ﬂ  ï ó>fssD ÿÇFontface’èı Italic font facÜ5rrequestÚ·ﬂ¡stars or und“e’ x=s3÷text. Bold isD°by dublicaít¬Y	Ó $ Mì.¨ bappear¬Â…	√
uÌ ImqI am _iˇ _“ ¬_bold__! But “C¡code: `ls -l!S ?. S /¨CCode®å
 ^“Ñ{“sor more‚
ê!thÇJÅsequence√or by embracñØ åetripleM=”and on bottomÚz
1 ")sWorld!"$  ‘! TI  NCImag˜`>Ò you insist on i  : in≈, n~+in–a&¡ tiî1The.!s ÉÙ73AwithqQxclamv «.4Q#' ![¨ 1 ca
F$](L.pngT°@"ofì§is a good πÅfor usag) = ‘2not† Útool. Don't overus	ÿpossibilitiesÿBÒ , sometimes les;Qmore.Ö¢Write clea°concise, db Úuse fancy visual effect\‰SncludÊT ÒCò	rrast toö1arda7dowQÉupport iI 1. Uƒ
¡A# # % "tDmd"`ı3
#'Xl4 o˚∑"s.—SmightÖ1fulz
C Åthe same‹ h®√ or a footer›eÁ1rel…6filﬁv'a Hll'>$GqE<3Ä«zA $edvé;2app–!onß 7s a∏ND. It°Us theê°, cmdline,.úAtext∂NÜ s˘hBƒAinstÿ.F	I ±† 	Òis easiest by downloÆö ”0[NÜ-0.6.binå	Ú raw.githubuserc√f(˘mittelmark/DGTcl/master/bin/M "),™1
#'´#ai2±main script24all9dtMries, toΩÚlocal machine. ReJ2hisD tòÚ , make it execu≈ëand coy i,aa foldÒ?ulongingf APATHÃ'abqLÃ¡done by copyf hNC!ası `;SC2ory=ŒM— Ipathnı ›◊+ uÓr`chmod`ñ‘ .L≥ ÷4!toõ@>
#'¶ º!y íWÒfor Tcl. Alternatively1canw=dall itÉ m!3iâLf\ #asMæY0.tm`eB. Se_°[tm manualÁÊÚwww.tcl.tk/man/tcl8.6/TclCmd/tm.htm)]	fTsee'>gKû2- [ºc Jcore’" ¥/doc/trunk/_S/ÎA.md)» 	Z1and?32w ów  ß’- a universal-ÂC VRuff!B ˛ÛÒapnadkarni/ruff) + J â«'!orΩ 3TclBMëQy†!YÛchanges'>CHANGES\° óS'19CS˙ ì22 AddingHÂ súAé —files to HTMLCvL *7 v3Afixe∆$ T8 KitÈ?
® '28® °2 to fossi2?B ı2-06 Partial R-Roxygen/¶ ΩY è20-01-05ô Fr@ˆ< 52-0!√ó
& $26G)Aoõ	 &0∏í 0 W~"csñedgw.cs;4 2Mak©sandalonî≤bpkgDepA ]mk_tm£ 3^e 7 	Òfor \_\_DATE\_\_, jPKGNAM ÛVERSION\_\_ macros  in TclA1ase tpackageÕS¶ S9-01 ‘á2 plugin  °11-09 arguLWQ--runØ rzB_5V 	 #1 & Å N Éø58 _V3 @s´z(2preFëted, emphn±strong/bold§≤ w2-02-11¸16.00ÕQ- par·CyamlƒÎ¡- workaroundH:> m4/Qtpack[∞	”—ƒOblob…ü ØL°al help up1_gleanup+ °moved to GH	1 in" é*9 @†W'.05 ·removing featug
oÁK1ify$Çcode, so+ #edz[Fort,‰r placeh	qand sor™1facÏt$RreducY A siz„ê3cre›¡cllib compat(s¿ Caku ËEVø˙S+Ú 's infrastructub Qsplit≥ ©!mm!©åCapps¥â )Ehook fRêë(benefit?‹p ∫ °ing licensx
2BSDÜ*Y-m-Y/ W11-17-8-√¶ ‚, sorry do notŒDS whatÆ#do  ò› ÉI˘4not"myûAAthis¥ K :$1D #--∞'≥ic--java¯& ,ëoder multê2filip î 3ing}= ; «3forÍ¯Q6uã¶Ejs J£ *ä.~.r™ :-Ts, by- [O 1  (I  v Sne onËh4ƒ•H‘πOshow‘ j F 2MakTëto build /s—Ko (80kb˛
©todo'>TODOü	tdtplitef/ ?;  !2s'>_V7(s)C hThe **ù%**ôÔwas written byL!}d
π/'> Vê Ö	Ó ﬂ!#´ ,
√¸ QCopyrë\)3 .`ã\<å\>¯TBSD LwAype:DÒSun Microsystems, Inc.ﬂS<Ò ing terms applyg!llS£s a ssociaî‹Òhe software unlessªQÚ icitly disclaim,ìindividuaR !. ñ ÒThe authors hereby grant permisëˆto use, copy, modify, ;]Ü, and
#'l6hisö {and itsáfßj]’Zm]k]	sZn]5 No√§agreement,› ,¥°royalty fe∞$ë	4any&\!iz%3es.AbcåBs toq0amay benîUtheir´«&"eeëfollow th8Mô'‡,ë^Te newyr!ly4Andic…o	 QfirstúÅ of eachü! wVBtheyº.ÎÒ In no event shallµFs orFëors be li∞!toôsparty fë\r,ñ Trect,,‚, incidental, ⁄XcÒtial damages ariE1outƒfå (uspM,∞X ëany deriv †Areofbeven iT ‡ ô!ëbeen adviç! £Ailit)Csuchß :ô:and)ßspecificalË2◊_1iesñ Û¯#"bu 'QlimitÒ
ë#Ñ implied`7ímerchanta¶ M rfitnessª∂ particular.aó°on-infring:g\! isãZ°an "as is"t*sH töZn=QobligO'qvide mac$Tance,Î,ës, enhanc† 2s, `1modTUtionsàÒRESTRICTED RIGHTS: Uu`mTosure•)agovern¢
Û asubjec⁄!thÎ"Atricn 3 as4Arth Úbparagraph (c) (1) (ii) of2qe RightG+·Technical DataÁ	§Computer S!ÒClause as DFARS
#' 252.227-70136 CFAR  è19. 


  /ë.vfs/lib/ ü/pkgIndexn5 jS204   	 nO5603 jˇUê8Ñµvsatisfies  4`¬Tcl] 8.6]} {[3}[Rëifneeded Aæ	R'O>íjoin $dir) o.tcl]]«1 ˇ'± ^< /12 O6120 ˇw ?5 9
Co 1.5.3+ ˇk öZ0 D7462	 O6042 ˇU'# ÏÅ --
#
#	{"  5s a&q5forÅ/4
#	âës that arA Bcess*±our variousé¶ƒs.
#	It alsor aroutin{ÓdT	{4nam´$p,ù è errors.Ân Ú1998-2000 by Ajuba Solul-
#Çq01-2015. Úndreas Kupries <a "_k Ô@users.sf.net>M 3ıby David N. Welton  <davidw@dedasys.com>
#ì¶ "T!e.üY" for}1#onπ%UoRion
#Ùˇ!€AÙDISCLAIMER OF ALLπnUIES.
˘	
 7_-

?;O: xq%·getArgv0 getop bKnownO Sfiles ∏ions \
	   '  V
}

#s #::T ˆÆ  2wor9—a fashion likNˇcrd
#	CœQ 1fun;q.  GiveEo Ó\—and a
#	pointÈ5Ú an array or args©¬⁄,J˘q#òˇf7 "ed˙A*"s:ÆsvVar		Ngdÿ1rgv®,√√you
#			want≈ìcess.  If)5fpÈb			argE "isñi`5!thø s5 e≠Afrom)ù "0b
#	optK"	Ag ∫kÇ“ pg Mbaccept« H3+˝8ìin ".arg"k#		⁄àB ◊(8nexàÀ nïUò £.  Otherwi?  ô x)rboolean~i|‰to 1 if presenª1TheRõP∫5"y # Z qcontainÎ ¢3was∫q(withou34 "leË&1'-'^  R .argÁ¡sion).
#	valë ¬Upon success∆ü 1 k 	ü Bvalu«◊(Oeÿ.1 £) Vcomes/22linE A.arg4 i"s,35ÄF Bis 1[ #IfQU fail√ RlVar *"le1 anY ZR mess÷6ı
# Results:
# 	TheR ™s÷éë, 0 if no©-4
# æ 4 wel∞-"an‡ˇ occurred.

procÔ {ˆ D)Â }årupvar 1D"VañAListó? eT
 P a
 Qset r' [§ÒAListO ŸR > éTSif {$@ <[=Ú  # Collapse unknown-2¢any-other-≥K .õ ü !-1 v@Æ { HïM  RˇÑa  Notes“CÑ‰JôaÿQm are6 BleftºG!isñ™ˇˇ¶≠…
Ø8
#	±9Æ™
^Ù was
#	encountereŸA2 if8Sother»‡∫ ÂC◊ 
ÊÁ¡# default seY%òcnormalOG 2set: 5 "" ∫ ™" 0GÒ# check if we're p¬2bhe end‘¨l∞ÔKísList] !=H2
	#O q got --áòÛ√doesn't begi)#-,Ã — (skipping
	#ä W--). k	ÜΩGÒ	 arg.
	switch -glob -- [¥EÅeAndexÅÆ D 0]] fì"--" {
		. ! w[lrange3 b1 end]} t"--*" - *H x[ÇL G 	H  \equal. D °0 0] "-"]}¶ ^ 4 Sarg 2© t	}

		#–8*S: [-]÷=nˇ 5idxÜ 5"="ä 1∑ s$idx !=“Iî e_val  B ˆ ™ ÆItidx+1}]• – < 80  @ E-1}]· HŸlsearch -exac˝	C †∞ 2# BtuNÑo 1 wheniMZ1 I >	°Kµ "∂ ;ª ¸
~ æ 2Ñâ≥exists _val_c $_val3 ∂ alengthl,: p\ $r Ûî ""O]\"$\";A"o ¶$-2… É[ ÒUËN.+ ˜É"Illegal! C \"-°7\"". m 1ú@ ∆{í¢Skip ahead;2}
	bh&’shP! a` ¬º- ƒ, filling inWss
#	for=6not&1.  JO2%,@¶1
#	‘lJÚthe allowed flagsz° incorrect 7 ish ÁN2TheÈDµﬂ£ list, typ#BargvuW˘W'ÿ}iÇÍRit.
#µ "Inww words,ﬂ<cÂ$o[?theK [dd¨AonlyÎ$nom/s,K 4andöëıÉoptlist	»B-of-î∑%qeach el#}4xsÌ!m: "	(> }duakes noá)$ 	 ícomment
# 3(or1& < ¢	< 
D "If.J1n t≠pRtakenœÑ8			Ω.(=;@Çppears iÖ∑#7ult)" ot 
X ¢ w ≤secret", it‡!no{;ídisplayed€3e uÁ		 Q		Tex¢aincludy' > 2. D
W(B			"¡1s:"J1d
#	Namï°pairs suitﬁífor usingc*/'seAl`Á`
)	Q{÷ £/:}	vè
Ÿbs [GetÎÓ $·˜…S)c ò!v]yU“S!rr*o%v\Ω.R arg]≈¢if {$err <Ã
v4(?)d Çbreak
	}\^a($opt)(é „}Œ s(?)] ||ëóG Rhelp)† E©o[Y$ w] USAGEk G[ﬂg2]¿ÒÃ|WIuignores .¿(m5
#	èoZ ŸDBWm	ÙQ
#	isyLÉ/ly¡	s$áyˇ=6ˇó	OcÖ# As we ± them, keep@
>
D#Á}ã°  Before wé%ur{’Oscedure,E £we'll prepÁSs«
44.!rg∞"so€ g¢2"loÏ&m.1« /s*%%KJ º#
= ™ L ˚!ovß6y
ÜOjiP\ ¡For now, addÕÉe4 ofM
? 1lapÉ/”^ ^Cv [lÕDargvƒ& k(á9) \ D&& !¿RmatchDí ˚4  Œ !ôƒ “ 6}
	ˆ	T== -2∆	 	+ O  @ 0	9}Ì#yŸ0Y‚ﬁ˘ rback on6J ’p	j
8Éconcat $j lw‰	ÇRÊ	Ê!inDliXBdure
 2ssei	ej·(that was passf2û(or9#J Qdure)Ue~Aß"Bgets$3dexêÆs ï ˙ˇÑof whichOZ' T's
#	>_valueÙ	 Q2<πyﬂ1Var∏ R'«cray in∫eto putob'Rã–%º {x ∑ Í° ◊ ªú∫r{? helpÌ4for p
—Ïbopt 0]ÇëtC- {\NA$} $2 !{}ceQa	!Neà" h5é ó¯$@Å#∞IÎc Ö ?argÇ ≈E# SeDsnV-3takå#s.1 s/ 
1fUname)Éõƒ#V{ ¸$NRfalse(S 0|4˙'I!--‰GbGeTOò£	á
6…(V(ø?	| #>At∫:4age}$9 -ﬁ{p5s:}‡õnDr "[t)]£&\nö°longest 20ôéw2s {â;t™\ŒÛ {{- "Forcibly stoposÚssing"} {help "Print≥´_"} {? }!©)"-£?0]"'¨UHiddeyôÅcontinueî@	Ä
A ﬁ
$Ç" value"&hIsc "√ I2] < L1]>"Y< 11]"©  ƒ
CnameÀc$n > $Ï2} {Ë˚˜ $n }
	# max notlâªW	,-3 EDmax(V V, )}]»—…a $desc_
T{&rdesc} $1 3{
	Bª_+Btrim3@[)µ " %-*s %s"ÿ Ú n $]]Â}"M$strPx,S‰+e	aof fil-h+—Ö2, c:Ç	!se; DvaliöQ≤  On windowÒe globbing is performed
#	on ±‚< RUnix,¶ì †2enc}Qestedˇ*J
#	aµ $Z8 noî a, a waƒ! iÜ§ionally
#	ˇD0Bcodeäuë
Ffull◊N∂ Afileâ ë not
#	giØ=tts [pwd]6◊lï
bis ens¬GΩ%Bthes% s«1evew>CflicQU¿°in our zipˇ Â ≤patterns	ThT   çdT<—user.
#	quietÒ–:det, no@ù :be 9:*!	RÖs7Ñ]q}¯îõ ?	 ≥{¿ ß -	a…Ùif {$::tcl_platform(	 c) == "õd"} {
	¯_ # $	 £ä9pat	:$ 8ò["ÖrÅplain --. * ú + A== {√R 5! $ÿ 	a”puts stdout "ºA: noÚsD$\"∞ ˇÖ~	‡ I| c å	˘ 	K«N nx s	U} g É{
	# Makò¢an absolutŸRö/we2
	#EÀ Ì	m2b‚~"àfullPathÕ£¸ #]
∞ !is $5 ]08É ! Õ–œAfileÃ|_’q ◊TArgv0û]¥; ãƒ"sanitized" Q!of|S0.  I?±strip
#	off7 O/˝3andÍ0 f".bin"Q/írour appI
Qe bec'@Bthey›âÇbe wrappÜÔa shell scriptœ !NoLc
fÕBª fäU"us
	/fB{X¬global argv0Yõ		BtailÖ0öiZArootè ]≥i#
# ##      / NÅEGaFs/◊5bovù"s.3 F j  b "
#[ C—:E"  kÉIZprovi‹6N7Ttypedu? 8linNôÜFS'˝V7ø6ˇ0 by Ross Palmer Mohn.Y6qÙ#
# RCS: @(#) $Id:XÚ.tcl,v 1.28 2011/02/23 17:41:52 aâ7x7o Exp $p6ÅYGetop 0 j°À#"˙ë::charclaÄ!--v# ≥    Create t”Qallow·ûD ; F
"‡
:is"ΩÓj |:> S,ofc Ósﬂo6"|"' sƒ3‚ ` Qcheck–lˇ abadKey ucatch {∂ Q . .}\ ‡ [ Bdumm9 "A    PÌá(.+)$} $Ö 6 U à1allB ë, (or )?}T 
B ]{|}  B !unGî :8'	?8  Ú1YT¨¬2p#,*5cg(B8Û In addition,
#	you may1y aA for÷Z "to†vÁA!â8 Ö8[Y 6s a5íÖ8 3 
Z%ed¨ D AremoÍjº5 AstarÑê… B	opt·%	A¬◊∂í iT ñã8Rxxx",ò%6 £xxx is any2÷<A tcl0 è @!n∞…broutin/
7 u∂H nex'sË5õ5 ã<OU≠l	‘72 Ω Úes (e.g. integer, double, b˚+,6 Òxdigit, etc.). Al
ãtively, ö2 ”9ëfor an un•˘Õ≈81 ` (O:Ød9%6xxx
)#i π µ§8nG!is}Qempty7 ¶Â. SOMETIMES! DPn2for§-Ö2!
#ó1 n 		Bspec<04 )Ifë‹ ©j
Ç96 aõ
 `R ≤ syntax:
#	˙.)ç*1foo˛ * ‡ÃQ“ 2 f:` 6 .5. AÚ1typ˛N1e auœ€W—
Õ∆.
#	Currentl!onªÙalnum, alpha, ascii, control,
#	V Qnqfalse, ÁL,çÚlower, print,
#	punÔOÚace, true, upper, wordchar, or ∞/f 2q*ÉaZ= °(bar|blat)·
Îîquantifie®VÒ#anôõá\ Oarg?ó Ü Ï6 Ås terminàQxby "--"J +J Ç ≥T *T Ù  ¡s work on altO  ”s, so, for
#	WY∂!—aOî◊3ica∂}a|blah)-ni≈ miscellany:‚s,b˝nª†Cline‚*¡a unique,
#	¯ØHenedoe£name. GiveqÅprogram  7	haÛ√Q{bar.„ blah.arg blatöÛ},
#	"foo -b fob" réoˆ(# a$ ı 
#	successfully3 ë{bar fob}Øü5
	Œuunction: ƒﬂ-™{:
#	 1	≠e”
#	 0	no moreÈÄ$toÛÇ
#	-1	inqÒa
#	-2	ZV%ngÆd( $3	  1 do;t_Atype˙ ®$A Bug~B4Whe.YÄ sZ"inJ%!al˜üsz
"us˛iìthe exactÓ ±. AbbreviatŸ Xcauseú*¢ "b"::'ÆSî4")OdureÍ ¥{ ?	
P?†ΩIRupvar	h? hx retvar e r optargP #–Ç setting¢8; -ùMtvar lÄ8Iò/  á85P é86 ï89 1   0%Z~5	…%	™8,  ç h&
k 2XJN—Cié
^Vsionsv N"g !"stíR
Î  ﬂ“:strÌ 9&t £set _opt [n ‚9“'4 8i [–∞ à ^_opt]ä di/9† 
 -	!• /$ió  ß^"noneiÇ [	T"±[^.]+([?+*]#op†R ]o ± ¶ Kæopt 0 end-1	ó¢ K L.M Ê"∂9)  f=l 1ø % n( 
Y? kkß"\\.(arg|$´A)\$"ﬁ s 3 7|| Z ˇ {\.\(([^)]+)\)}P !	—_k<7arg∫Î
l∑type arg
		*ì >"^(Á › O		d “dBh* Œ;!yp∫/ofL ∑ X4Qc ≤}?opt?D,1*"á;_ == 0Ï  %||πF"--"}/0]æP 1à Ä   ´Oneofß Qif {$	a== "ar]$s1sety
›" aÿ/ 	Pq Qoneof': 	 ⁄ ,ˇ°+ ∑ S Eho == "?÷ V
	 ¸ ;´◊ +◊ ¢ 
}O] < A Ol -2Àüq ì?á?qt leasttq Á$«ä!?optàcl° 'ﬂ 	Ñ æ*ÁæE• )Á§∆π4_ÿ4 ìπ*sBVif {(z_arg")G|| (9 Ï; %&&ó%"|°)g0]|" "Q
2|"]]† "ê† i!¶ /])«ßLÚ5©¶ ”
+±
/¢t	
üog ñä   ˇLØ0 Ol -3G	ÇIAıY.	T Õ‚'ãÜ{[+*]} $a …obreak;ª 
â  NêE'2\
	f*kHmø?:Øb›
‘6es"J ‚BAD OPTION TYPB ¥ ∞ 
1® "--€r& c% >l -À
´ X+dEÀIWI 
 " $
(›Ví≠%CJBThisÿ.Ω-ã3bIüﬁPdI c is
#	<∂[AThe )"´hI™"lH<Ä	π ◊
SH¢
Ç!maéª"¸n *1ingW Œ o JG! iU ÙÜ0	:eying aì ‘ 2. Cö : ≈ ú ŒGTÓ"Òs "--", "-help",K%A"-?"ë$sautomatÙJ›d‰ i‹G‘2‹3and‹ Viáﬁ#.î1„ë5two…%£al suffixe®$^*Ya!ed[Os
#	pass‹a!to¨_ Aionsx!#	Y&aadd ".èv"4$f /n9#eion. F√s3v8uJ, &1mea¡\K%vÆ !usN$Ùüthan once`¸%"atÔ""#ó%!enêqoÑ ,§Á#©| q#84T6ñIf a non-Ê	dM5 asC2, i¨nb	toggl<}aÓSf•íeach time) ∂-È"`Q
#	li. ùè ã˜Ã—#±ŸÒCffixü F notZ9t¯3Z 
ûb.
#	In‹Úcase, the behaviıR ä:Athat0Qe lasvªô∆ÊÀÅreturnedr»ahat do∫ yJ #s,ã BthemMYV nFxàˆ2may)Bbe h@8 +!LS by
#Õ6 t#heóõL √\ü!ÑPlease nÀZE > ™ L+; s,
#	aft„CóJtypej ›ÃU Ù"Ê#Zq.secretŸÙ >5ÓÑË:$∆Lã`L
Ö1¥á‡L&>ΩÈ0l#Ag.ß,04>[ ıbRemove?”Ñ9Æ
¶‡[	ì
á ΩÜ J	I
	| (.*y Itemp, Aset ü Ü($temp) r
“ Aus $nameD tÈë|\\(.+).?Ò`	!{}h	ÿßB?r  V ‘just by beingŒVs, or no" õ.:flt^øıddflt !'7@  H è!s(,u) $dflt3
f e≈O≥4D: On π ºFpƒ°.—:s—AàF_ *&&£OC2opt¢O, ]Ter,ryû6new*˜{èarg == "hc0—7è 	w{9	|> 9 "$ N$arg€æ ;]  O K G Ä∫v-1) ||  3]GZ3¬|@Q^f i2 && !“„v óÌ R≈ Ç x |#2{op˚D} [aäGƒ]e Jif {[
Ü  L	Ä Z ¢7ó⁄íÅC#A,
#	ã}+ø-1n (H4y),GA Ù'dá
#al|
∞	¿*ô(É1		Alﬁ5®y/∞	⁄ñCI {n õCµµCRµ_    {ïC&@ ≥ U+"-	™d		™C.
	a |
Ò	¬Display some®¶Cabouî%plq

f ¬%nW$…6B] ||x #A$!
	C$G%Ω~ -.+‘' ’Hame ˇ#åD	≤2è?Dè¿ Øî$ !	ÓçD " <# >v ÀN0Hi á !1]’Dˆ	SaccumRJD	ã•Ç#·DRÀ%	Ä ")}≤X‰besc} $— ÍDA!ÈD	@)ø-∞ï©cfor a ÃA1; s! #es nü-QmatchiRnd if|Ê3) ı/ z   5 e÷f É
#	(i.e,d "ìa"In cglob $= !*"∏AÁ:Ast		œ !of∏2sÛ˛CQ		wor</‹ G1˚:»cdex ofq1 Z¶uﬁD Ü ‚0M@Ÿu£8Bn -1§¶J „I-ô{≈ ∫ ]1# C0fd	ç∫
∫set pos [::P! $T @-]]Æù S $pos*	 	w €	Î  ∆d \∫q õ ‘7 õ *ú  b# Whatne„ÇÅ nothing7f?ï ¨ ˘q —Hq$pos + ÿd2 ± !tra 'irû ! $L ¯0õ C}Ä G$posµ,À I J-1
}ã	ˆ
«I9RQhelpe´RthrowW>qr proper -ŒG_ttachò¡message		texH2the;  #Brow.m6s		Äd partsÃmBs GZaÙwith CMDLINE as basicC2add A=Ù	îc:
#	An© "is° èn, alwayÁBI{Ô T argsŒ}∏ √ -  Å[linsertd4s 0µ 3] $M /
}Å\
 |pç	 Ñ2ı 100644  1750    b70777  Ñø4 16471   0||0 ﬂustar 00groth.    §#ºËÒe MIT License (MIT)·CÁäÚ (c) 2014 Caius P±≤% 1Per36Ω®åqed, freµtcharge,√“person obtain¨bcopy
# &is=çºQssocif9Ådocumenta∆Is(the "S2 !")g ddeal
#µc K°out restrin7,ãâ äâd Athe NN4s
#çpç!me› zpublishÄçsΩ§Ùense, and/or sell
#çÚ¢ & 2 toÊçt+qIwhom, · is
# furnishe§!doÎ9—à=8¡ conditions:øˇGGÓRnoticzåä „ Éshall be:!edáey:÷ Òr substantial poru ‡¬ ãÙgTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THEM ˇ
IES OF MERCHANTABILITY,
#jÎÚ AND NONINFRINGEMENT. IN NO EVENT SHALL THE
# ±ëÚS OR COPYRIGHT HOLDERS BE LIABLEm ÒNY CLAIM, DAMAGE6 qOTHER
#) § Ò WHETHER IN AN AC:"∆È•RACT, TORT= ÒWISE, ARISING FROM,
# OUT OF OG RCONNEH AWITH)ú!OR !US ê À DEALINGS INÀT.
#

]à§*A Tcl#R9 À°Û::tabify

## \file
# \brief F";sæ	aconver
Ñmarkdownèú_.

##8 "'#
á~6val≈í{
 ¶~á  "##˝
 " C£ !s 	Øwritten in±  7 f@param% ˜C ; c , Qtabs  Rwheth÷	2|2rve < B TØ†&isã<iÍjëa fragmen»Pt$!£plete HTMLJ üµ. The forma
b "is7#íic XHTML.;  Cprocpû5t {#{æ 0√6set¬’all {\r\n?} $@ *\n°Q!$tab∂		ö9, <[::âB::unì2U B4]
	tD ∑5âTå ]&ÏÒ COLLECT REFERENCESB    ‹"$::É¬::_referencel, * ó [collect> =	í fPROCESá “
«[parse_block9 Ì∫ q# RegisGÜ languag@⁄Rer. Tê¿#erlND º ±for fenced >| Çtransfor Â{E °prettified†fr© d{lang_r%UAer {X3ded{Jç¿ *($E 2) [öB $, 7à!a ‡≈£(attributeÕùpairs) ofUsers andı Úthe number of occur,! aBby were"/in` 'Aget_‹ 1cou¨Ç›O	ßg{1 Ô Ì7&he– ` 	¯ò ?resö í 9î .πí# \privat(É/éD_varÒ¢?AE_var#Ì˜ set lines [spli	û¨#o_* /8 JmV WQ
## {Ê ™8$: 4< $i Œ _ FlineœÄ  : 0Ò®<1\
	QÒ
 {^[ ]{0,3}\[((?:[^\]]|\[ Ò%*?\])+)\]:\s*(\S+)(?:\s+(([\"\']).*\4|\(.*\))\s*$)?}"+q $ö j Û  ref link titlex◊ € $ 	§ ]>" 1=x “% /eq[n Anext–N;+1]Q ö!YZ-'?:/1/.0 $Ä ]ù ñ	“HtrimS É?.-1# Qincr ru A  öf•Œtolower $refy ik/ ¥ 3{<>q ` VU($ref¿7 Î
k XÁ " .£W - ç|	Üπ {parent {}	í/  ï;'  ”<^isult  èrset ul_¡1‘(?:\*(?!\s*\* B$)|- - c$)|\+)õloO T\d+\.•v	‰ï MARKDOWNô!CÉswitch -$-Ò "vaÇ¿ˇ !--keø o{^\s*$µ∑# EMPTY LIN=
 cif {![} M ![lìu ŸO-1]]h aSppendp#f "\n\n¥ √# 1 /\[@??\S+?÷ o# SKIP î∆Î ≈aå  k 6 ü	S-[ ]* r- ]*$} ¯V ŒS_[ ]* _/ e\*[ ]* "\*3 O  ˇ# HORIZONTAL RULÌî"<hr />…J	Y#{1,6í ˇ# ATX STYLE HEADERS<¥2#+}≠% mØ µset h_level˘elength ºmoB b\
			[y%inr		s 
m§^\s*#+\s*|	 $Æ	$		≠	/{}u å$≈ $>$å &</ ¶:/\>IØBLOCK QUOTEdset bq/f Q uÎS    l9É ïkd\>[ ]?7/{}g
õœf {[is_empty≠
 8eoqò Qfor {r3eekã} {$peeköOpeekÆ ˝	∫Opeek -

q
 B ª>âI NÁ, 	ì _breakY L C beoq} {o ß	 K Õº8 ∏ 
Æ	Õv[join $I/\n≠#<ñÇquote>\n˜7 $] A\n</ 4 à¿ ø{^\s{4,}\S+∆# CODE BLOCKª 1setF±nÖ ˝ [html_escape [\ ëregsub {^s?{}]6 Ówset eoc• †AœúVò%> îPê5åƒ 
D 1xcxf è^"	ÿS /\nè»H∫<pre><code>@ !</ O</pr5Ò(?:(?:`{3,})|(?:~
 Ú)(\{?\S+\}?)?\s*.Z[# orig:> 1\{?∞A?\}?ñπ
è# FENCEDó!+üSû è0] eq {`kD#ndi!{^Ω ! 
 …0à  P YP v# & AÙu}i"fd/ ∑immediatelyÀÜNh!de™ Ders.2  ± T```tcäÑ TzÜ 8:ıfor two purposes:T ¡a) As a CSS ÜF a5Aˆ   (useful e.g. for,≤E.js)I bI 1nam(ë a source®∆2: ¡   When suchÜDq)~8ed,0 "thW z:!seYrRroughıL M-
'FjolowerSn31]]á õÉn#ne4-ã1BCCS_Y"a)='(E π]'"
			incr'& Sùî ÎÄ %ãE›Fm≈¸I(Á$§¡Cb 3ª+≥Ê⁄Oine]} ´’	À
a xùˆ7# I+ab=Á≤Uit on8 	%Aesulq!|snippet*Òç5ñ`ìœ			lassign $7  cd$
œmv&5f {í5} {G´cmd [lrang:»0È2] }• 
b “
z Â
"upñt#0 $cmd} w˚
7ãC"<práUí='code'>"tQ® ^>  éG j†‰∫Ü|-|\+) |˙ÅRo# LISTµOlistµ±# continue \øAame É2typŸ ™.:ÜjQó ë6l »#stEd 1 N w uw dw ¬	m #asπ?AAA' #ëÎ/!	BnS —≤  áset item`  + 7n_pq> Œs/ 1/§…jÏ Dincrf –~ 
ÿÏG , á}"≠R\\s*"A [â#d∂crecursî¶†nõg ı{\A(\d+)\.(\s+)} _\1\\.\2€  Ã M s*|\+|-)O Õ A\\\1L ˇ<= x
P?2no + 1}]˝-· lV ë ]˛> éßOin_pMî»>s	Àk «_$in_pü	 / ˛ Ï 94 ìZ
Î ôV Is3P¨z∞/« Ò 4  Iâp âU  <>
Zàπ	rv /li– í\±≤-lineanchor=
≈{(\A.*?)((?:ı	
	f).*\Z)$+  +\ œ	Q para∞1#]
  %!inU_$para hT	m$re©8 ÿ	 ∞ É ∑ «¬”Ø
X"<li>x O</li)ó|?peecÉ gy à47typZY• 2\n]1)</1 \¨_Ò{^<(?:p|div|h[1-6]|"úQ|pre|yó¢|dl|ol|ul|Z{3|no	 ˝form|fieldset|iframe|math|ins|delÚD #ï,≥é E_tagn§Æ6¶(Vm%Ù_htmltag {<(/?)(\wc)ˇ\w+(?:=\"[^\"]+\"|'[^']+')?)*\s*>°ç 
*ﬂ% & ~uffer {nÉ* Z ¸ ? \nO3ncr;Æ j)1agsá
Sexp -Bg-all $m$° 9
ìset stackÎF0
—O{Ûøname} $tags∂$YBeq $
?tag6ão Ÿ*
 J€ +'Å a -a ˘Ù æ$Ë =Ã=”Q ù/œÖ ¡# Skip emptyû"s ∂O<QBlock*/ ä"K && ˝à üŒ Õ m6 Ù!E Â ⁄@ GeÆ* ∏q{(?:^\sŒ.Ø|[^\\]+)\|Mœ# SIMPLE TABÇ&πüell_align,Ã%ow,´ Q&## â>Ûa space between || to handledFcellj4 § l}µkn*	+{«)ï|]|\\\|)+ 
äPä{\|(?=\|
˛√&Øline] {| }™!´@©{E †"epŒ Ë) s# check≈pdhave a_oor rowÇ 
Ù/©q0,3}\|?‰*c*:?-+: ‘$|\s*\|))+} $µ W	Ê l	…µ	íÄ ˝ €ócell_data¡ ˚ S-$K @ Ø    {:-*:}1 Kq æOcentH  ` ?{:-Ú# »† Oleftt
 û /-+>1Orighü ALJﬂ/…
 =& ¿ ∫
  J 
!"<Óv!\" ?\">Ê/ F Ohead6 Q  <tr5 ¨
2›¥}Êtset num€-9»Ü	 ∆h  à/lsf ‘! {'q 0} {$i6	’ *+igAset ˚ 4ZO$i]]_ú	`	Ò"    <th style=\"text-p 1: $ /\"N zÉ f z\ 8&/ - f XS $i]]∆$ </th> "x›W b–  ⁄≈/</Œ¢πÚ é	1©è Qtbody'ø  {ˇ√d{od{†d{a≤Î:®e[A f/!Û|eû$µ †1$ Ü1"</¶	  5ú/ù ?   4L¡'& 
   =˚# PARAGRAPHS AND SETEXT8
v  X"Ztype a ! ô'ä6(U#9
˝A_) && \0Ç≤	-e%zÉN&/=+ı< ˛ h©@  Ÿ ü -ü 2) ü 7Å	y	∞	^@oeq {lie/
 n ˜ ¿0	ªÅ˛ = ; =o ]*_[_O= ; &=2=/\*? µ< ·›WX Ù { Fj\„O æº'_ e ‰  $	 j4B /n]‰Û
x(
z∑<!--.*?-->}R /{}Ù;2# D<kÒmake a new paragraphˇ15juspsùŸ” ≤r\$">W $</ J
  ŸÊEÑe∫  ◊EÈX{textôx&ex™$ Ñ#¡{[ ]{2,}$} $PW<br/>Ç+Gndexi±+ _ãÂñs   {\A`+Ë " Rwhite5M {\s  œ AlinkB Û!?\[([^\]]*)\]\(\s*JÑs\)]+|\( Ò	\))+)?(\s+([\"'])(.*)?\4ß6-\)i 2reff ´ \j 1(?:m 1|\[ jJo(?:\s*åJm*)\])?c F!.Ú\A</?\w+\s*>|\A<J!S!G=(?:S!˝\'[^\']+\'))*\s*/?>\ Dauto¿ ˛{\A<(?:(\S+@\S+)|(\S+://\S+)); õr˙ ∏sã#íre_entity ì{\A\&\S+;ìé![ÁÇ”45U’‚	O$chr¡ ?"\\±äø    # ESCAP^A∏Jñ éÌ18Ö]O Ò{\`*_\{\}[]()#+-.!>|}ï]≥à6chrJ n  #   /{_GE*" HOHASIDÜ
∆XÙãèend]] &&¡ ∆N óB4+1]•$≈ dOOhing| ˚– T-starf &	|—A(\\$chr{1,3}†(2\[^ A\\\\ä\ c)*)\\1033	  ª ã(≤m del sub]
êƒ 	ZlOdel]%  ‹:em>4ü$sub]</em}v 2´ ¥è"<strongè  o ì 3ì '&	ú .R 2m)
5   œ4 6/{`†+BC EØP $m? W ãﬂ0	/m]åFÿﬂ≥-indices $múmàé738ﬂm from to
			§ 5subêQ£ _)∏z á$from-1]Y	 ì¨?
‹9î ±	C"to2Œ ˙6!  /{!j[ABLINKƒIö\{ @1chr°?!<
Z
fƒ/im¯		F ?linÊ´LZBtch_ygm%ü8˚
(¡ txt url ignAQtitle∏C è# INLINEU◊$R
7 "seä 	ñˆÅ$url {<>V%l  ñx/Û _ $txt4 TT	+VS¥ 
ñ1* $-ò?lblä
¬1lbl¬¡
V;lblTA\s+}? { ≈ñ	X Œ
n@O$lbl;™Ü=_ÌTOlbl)
E    cc@G Î„¶‘ å0K ê8 î!§
1RDì ¨&  ë˚Ç Rˇ# PRINT IMG, A TAG> ˚zêEf {$ø+/nk0c ,e"gÚ a href=\"$url\"—2=\"YØ\">$txt</aXÄ o sÀâ 91vimg src:1alt8/xtG /@Eá 
v G~.	/<—3“TAGS, COMMENT&	AAUTO4	≤ ™{Ïπ©

ü$¶≥ó"<ªÃ ÛÕ ø email linkÿ 
Ú,è&ûkÎ$g Ç 
@_qlink\">D Pçß
}Ú mailto_prefix " /:"° 
	9AB"^${6 E Ç}(.*)" $V c^
 #: AdoesÉbcontai k® » ¬Eiltoﬁ õ ‰ ° £k 2\">e ¶gdj±

Á\[@—QN$chrÂ‡/{&SoENTITIc±#
$¸R‚>”' ?"\"£O[lˇSPECIAL CHARACTERd*Â
 «
˚ÑΩ‡A µ~û
YX{line®N Ä•_f ˆ{ “a˘T˙[ ÚÛmap {& &amp; < &lt; > &gt; \" &quot;y %}
\mOP Ajr 1.2.3
d 
 t1pkg“x2 tD214 ›
 t?333 tˇUS£oµvsatisfies  ABTcl]∏o Ù

h! [ÉKŸQÛπƒ?&di%iÙˇi
 Åq/tabify˛2 C3172 5 16151 ˇUa#
# AsâmÅauthor oRÇ procs '	Ö2' and 'q≤' I suggest•1the—v≥mments explŸwÚtheir behaviour be keptòw"is˛√·
# 1) Beginner®r4any»ØFmingMpÒ(I am new to Tcl so I?ÿë what I
#úÒm talking about)cpÚprofit enormously3Òstudying 'correct'ƒQ.K ñOf course· CVñhelp a loŒ „regard.
# 2) Mƒ Úblems newbies face can be solvü|QdirecXS"”RwardsÄ Qavail!º≥libraries -˜?Gall, q<Ebeenjt"tof K ïrecurringò Q. TheÂyñ jVØRm, orT “a closer lookL ato seeÚto discover how things are donlêÒ'Tcl way'.
# 3) And if ever apåaœ Ò y should be lesÛë·n perfect, hav*ñ0xv÷BcodeˇW“surely help.
{¢is said, I# Òwelcome any error repo§~r˛ävaimprov®ﬂÒs
# (especially o^t 'doing!thSÇ aspect)â !Us1{Sthese:Ss is EzSd undAEO—y! a) 2TclJ ÒJune 2001, Helmut Giese (hgiese@ratiosoft.com)- 8Q îThe origi¶“UTb' each√¥“^vbblocks|Ú$num spaces ('num' holdYÂvë size). WÒB1thi¢certainly ûZˆ
# in some circumstances, itareflecﬁ! wÖœq editorß °s:
# 	Coun∏rcolumns≈q1, assu∫aó Q of 814>qa12345'»bfollow5 ë, you expÖ √o advance ton Ñ 9. Youró F\L 2putD ut¿»Cor 3Aq, depen=·on its configuƒn.
#	Now, on	Aing'î  ô ïsee those] WXdπ ¥
#	tab (andQotherlB‚ ¬2*atπ˘position* to be
#	V … )Ôs iíis mimickQ1the5ŸÛBBoth¯Òone feature in common: They accept multiô)ﬂ˜Ås (a who∏z ‚2 if8a1µA) bu5!orÃÒo make life simpler<+!thÅrgrammerÉ˛≈Ct¸…1comÚVtÿwëindividua_e"vk1ach8F1 to){óeöAreal‰Z¢   One des»!ci∆SÒworth mentioning here:/ ≤   A singlemQ is nÎ	¬¢qeven ifÇÛd wouldM AalloRdo so§S_ Òs occur very often, say in arithmetic expre«~as like^ j!Û(($a + $b) * $c) < $d]. If we didn't†ß◊above rule wew"neÒbreplac?§or more of‹° tabs. Howi &2get˙Çchanged,ø $ ba{Û ted quite diffeºr- which$Ä ÒCablyΩ{îgood idea„ﬁ	Âµ•Â · ¬±aÚW§2: I€ áxtﬁ~Rs it,∑	±else to do?A "As‹_Qsequeı`1two,]µunsymmetricQ
M,bIK Acoul¡Òthink of a better 2ÀàúClAyou?∏8O-
#
S»s RequirOÕ6ˆ
]8.5 9 ¬ú::repeat
Ã~&::# ›36ü AAPI ßümentationi ë
    nameÈ import -forceö Ω b::strR» }¯ä¿ » ï{ num 8 }v\Ô	SöÚ[MakeTabStr $num] \t] ${]v 
/x "\{  x ≤ È ó‹ö– m 2Lenøbif { $ 1 !=˘ Û  } then {
	set  E$num 1StrBíA " ": up i$É /}
K?"# ∏ÂLine: Works on~›!of=1,âQing 'uSs at ÂT
# 		ì"s'∆õd$num iAquest¬ab size.
#		≤}# Ò(possibly modified)à \z 	Çs': Only&s≤Q'fillh: ı	' between
# an arbitraryF S
·"xt¶ 1topœ#beÛed. 
# Example: WÌ — 4 8,Ç a¶ís 11 - 13Ô	X*not*Q ê ùŒÅan expan#k8tabV 2 11P Újump up to 16.
# See-ü%thk 
1e b2ingG9C whyv¿ are
# *m*¸ SíTX	cù…¢backwards,ærthe endk eW´ 	ç Ç:
#	- Seã	K3 to
+> RearchY Ò('lastPos') to 'end'.D #Fi√Œ†ŒArenc √' ' in 'line¶r`tE S #
#ãÚ  ('currPos' below).‡iUqandidat>"BmentX	D    ê &o I C¢ne!us 'he_	ä tnextTabm	$û ! +B7) - % ]E Tand gevreviousÇ ëas well (´bsAstarúL Upoint]12iteÚ)åßThe ' ' atˇ is only@	¢ if
#	  1)≠£L'onüü˙⁄Q*and*7 '2)óeé≥1 at!áleft (se"å
úâI b   touc≤an isolated"‰ 3  C2cA, if‚û
sP!is-
2met±Determine w© ‡z(E1is:5man◊!?)£ èby steppX¡ until
#		--83hit1•=ì 4are'	êaDªQement6÷"¬is algorithmÒ#'›%	 !Õ·Otherwise our `bterpre 	v
n≥CbeyoÛ2tabÒbe wrong. (Imagine˝ î
# find añŸ R 4 inW?´1you8¡a3 leadò1absF¶r *real*
#6“ube 25 (±of 8). SincÛ!reF"fe/gsÙπ 
# alreadyÇ, we tesi"it˘Ùeventually call B	ALineƒ„	±Line { line„	˙—Õ,5"\tŸ5° } { 		
	#ò#re`á!'SLﬂÅset up 'NÚ il faut'
	checkAr!
3
	#ŒZ+e&	ö [ÿ Ü ”	)	¶$B end>	•U# $”A > 0ƒ
î	5È *Ü	w 5 1]
	e=
^JB# noëKs ¢break;
	}
  
≤%{(N +Ã ≥"}]< FprevÓ{/ÇQTab -; a}]

	#›€1are!Üaround:GÀgIat 'œ/B- 1'f $T${$v 1- 1c ∏ "1)Ì
é Ú 			;# crit. (1)F rÏ/ow ñw n?" "] 2] Q# now	É
a¶Cdı ~ 2Dddos >= 2} {3fAos -rK÷ J$pos≈ 	¢*Q# ...?OŸó2f&]3p˙E1}] V\@0ˇ!´!“line
}

#
# H©ñ"Xfor 'fÇ': CheckUØ!llßBed e¢s~frray
#Û/∆ bcreateÀ1mis“1oneN BneedÔñ
| û"ë2LenˇCAvariÃz˘êt>ô2Dˆc set i>	{∫24⁄Q$i <=^ 	#A mo A($i)û≈i…åd¯2K ìM")
#¨vBtabsY¢enough
#		x2 to’	o>
∂e”1eduìQ straUsÅforward:hp ⁄ÅCalculaty +˚Uing i	#le/ 1tabGôinsert as¸$aséÒ OhereQ‹ÒE$Ò?K2{ 1! ”
.ëE8tabC!thow farDR?ê 6dis18?numX#L1'\tõ<awith $I ZZ ¶â; 	 Rdist)¢
°U (notkﬂÒly necessary but maybﬂÇrifle
	#j¡efficient)
	ù∏∑ iÑ93tur”	˙≥ tabify2: RSÚall 'appropriate'ÿiìdiscussed“B
#	''ª	Aholdì
Qnumbe#.a", X˛
˝˘h ?.
#3◊ =#Á∏ …⁄) bnLst [2 ¡vgj]&on> 1out? $li–eßZG$^ C{
	lÑ(1 » 2Linc.Í	 #’Öall as o(~  s[join $W !\n|xWGthe Œ˙~‹¸®E    âπ` *Œ L¸-„
ˇ Data structuresxy‰1  8  eStr  [u„/ l8Ω!exΩ Ø ıj §Ω	q2' usesdî s="cyv0#úa8canî1 byb≠'÷%‡Éis handyñ qto haveÑ J'a~&s'á#MÉthe use Æ #D Errayg
,,w
D(n)':!$'nû ‡ 5The" 'Å≤2' rememberx #biÄ%πCused\±= …2H ∞ $
r {0 ""})##      ∂Eady
ïqprovideäcutil::.O0.8
1ü§ º *ruO.tcl 0 ¢Q4355 Æ */35 *ˇV Î¡ --
#
#	Emul‘4 of¸& Ù for older
#	revis”üt&3¢"00‚‘by Ajuba Solu/º. ˚1-2006 by Andreas Kupries <‚Âr@users.!'√forge.net>
#IØSile "9'q.terms"ƒ cinformÂ bn usag…(ëredistrib§ "
#!isK ,ÊÒfor a DISCLAIMERä†$LLö†AIES.Ö »ÊBÒ.tcl,v 1.1 2006/04/21 04:42:2&∆Ê	É} á=  	? {}~ S 
ä¥HaveBuiltin·í![catch {{£q a 1}]}Tif {0˛4# Pd+·he deactivated +:u ë# - Linea˝ŸÁsb- Testq¡x a' in eZ$Scall!J b  (Ok,¬t∞í, still a 9 )9 c- Failj ïnum == 0'@Ûof undefined 'str'‘~K°5::SÃe{ char	Ìc—$ Ä ˇnv0Smb ƒiV	ístr $charC 5}
	;tõset str [T4 5 à/A$str3äXif {$|   *, ⁄
{+©r [ Õ ô 	∫^ èblank {nS ÆnO  W 
µ qnum <= fA# No+"icﬂ4$dñÍ $""ûF A== 1∫ Ò    # Quick exit1erecurs¯ˆG ªJ 2J "AnE&qR W a0 == ( G% 2)] CHalv5/·&Úlem results in O (log n) complexity.„ 0HHsultÚ{ àq b/ 2}]]4 ˜ "D8 LQˆ# Uneven length, reduc° £S Gchar{â irnum -1]æ˜áäR’ÜÉJL‰>‹=å  sÅ sˇ  :R?164 /42 ˇV :%Ä±# FRINK: noy $%
}"ifC S0.10 ã)csource}€5dir6 o.tcl]]V A::adp#  0.7.4V , T O   0.9 ™ , S mMS 8S OtrimR _abifyR , T 7¶ , T ¢0M, T Ôexpander 1.3.2ı, V pÄR2§, S ﬂwcswidth 35.3J, V Ñ0 
 ?yam¸< 
$57ˇ @o3 1546 @ˇV
%Á.}
ëAyaml›‰4ñCyamlÈ+∞3bhuddleK O 0.5å0 N o::json⁄Yjson2S — ∏  Ò Ë 4 C2706
 ?222 ˇWÔa (workNBitle< Ò0.1.5 2011-08-23 14:46:47 KATO Kanryu(k 6üT $ˇ$is/∑"ed!$Athe §uÒ cllib's BSD-styŸ1Rcense¶.	„Unamed  D Ñ!Th9=AbrarN@èQfunctπ∑>17Sinatewa/list/äØ#in‡9CrankV ∂h8-2011/ <
>¸ Ò15 Miguel Mart√≠nez L√≥pez <a–1cioÍ Êida@gmail.com>ÉÎ6 ˚ ŒO 0.58  ´ qwrap un 2isH†ëstrip_nod≤(a_equal Òs \
	argument_to Ç get_src˚&ó4typ'£# Some subÚö<Blict+STcl b5# A. Sox,Rmake
∆I2Dnven–Ø0(,l8"inµÙ1casì*@ aprivat@Çcs (e.g.…1Ú "set" to "Set")À ﬂÛnsemble create -map5ê'
  Q::Set~ ÒJ  ( eAppend+ gT 	GT ~atrippeZ R  X :unsZ 0 7UnsX dcombin≠ +  V  l_relaxà  5 ?typ_ 2typÛD%?mov)  R ™6  ≤  ) Axist)≠ *  + ?clo'lo?S R  T o' 
+ Ewrap' ò$  T  + OaddTO - ujsondumZ V  + Ucompi≥	 .  - ÷/\x t {typeN(:◊*ê\- & [Åitail $G v1 wCommand} UType_3 “[upvarR _Û	 6 Qif {[>c,4s $  T map]– 
-Å_map_of_Á@ ;get= <: !re_)9 èvalues $\ 		}Q 
'x€ ∫ Ï $«$:: 'b'wpath_to∆ c [infovG +*]L ^ À$™$> Oni $U ≤Q Ω  Ã	÷≈<eva≈% "5 ( H=À/ ˚Î` √9 Õ ‘ 	ﬁ
© éwunknownà  -‚~π-ìVQI$lscÒ∑fá, {Ÿc# nYù+\œ ¡"ÿI≠	H_mapíÍhE8#ö`Àá 6∂$IxcMethod, 	¨eì Ñﬂ
[ ,t6¢‡OsupeîÚp&s(% Ü:$tag) $ I : Dtype4 ”'  àcallback+ ..  ¥isContainer1  1  btagOfTã r)éç, π ïÏ& $ëB ^s@  V::is_*‰_of {tag1 tag2¿∏E€Iß á(list_ofT !es-1)õ2 ?∏FÆ 1tag$1ï0Dtrueø  9≤ P :4J_tag≤  j ì4F 
Ä 
B ∆ ó   l!B” 	å • ï5
+  çëëif {$tag2*:é ìí! 1Z ã  j2Œ	À {7CmdﬂT argsz |Y	[—2  p/-·ôˇ‘∑,	
e	 f ÷Ã	¨ -Æ	¶ F `@ Ü
Ö - ë h
à $ $e«"KÿŸerror "Invali¶'å '"´
'p 'V »HT {objÓƒÚlindex $obj 0] ne "HUDDLE" || [lH!  ù8¯œ àA    ±«¶	r 1Âp&ag * 0 R ¶7b[array∫6eypes "üÑ"] == ""‹ û  H :1$ á	E{nod"Õ  	£{head src}≥ ]P± Jhead@,Á* ’ Ÿ [1 }X Ibp $srcACÂIa A$src) 
 / ö’Ùhead '$head' doesn'.Éw>î{tag cmd ≈
{f ü Á √Öcmd {*}$K ü(◊–( {Ál Ú ”!9$ar˙	dCA$obj3 S2set—v_object∆E ∆„ï_of_group& [#$D 3] 0rò VF ©ü  R(‡Q}≠' É£ !neA€	$™@ 	ˇ $yV	y WO$tagy ∆Éunmatche#— are given or¬2\ikBa—Éhe otherÏ   
 n•'5{*}áX?src Ò )æÙ _subnodes "" {}NvJ1wrayv"ag$7{ﬁç	% 	Å;$\{v'&\}b= Q–‰»—{src {default%
s¯j†ö 9srcê 2óı* 1m 5 J ga{ node®+¥L b4õ {Ã2L  º?°/ 1R S ï	[ ]\ ;Get%	U
Fíretrieve_T \ .ÜΩ 7j 5'§ m !paUèAripp≈¨7	‹ ãyÚBrgetÉS[Find È
]:ót R P $h ˙‘§0  œ 
OA%ar”˚ á	û~+		Otag)Ë  ò 
T pathÔ3.vÀú 1sub0$ èº∏ ' 
` )œÉ 1srcK Cpath˛í g ˚  ≈Â@t Î° 32keyÁ[/)f	C.
/&&H)_>Ekey]g Ëà2keyÑUO¿=& ±˛¥©©
d1 obj2§	t2obj= <_ [ÎqVobj1]¿_obj2]¶A E1£ G˝[Csrc1N1% c2 src2% 2% 4ag1∫
2.%" 0Ñ	¯ ;btag1) [Q$src1P2È ˛Å9varÏ‡ £Œ19rvar objıô˛ Ì ^ç]Ú õ$

ı	f°sset obj°) ]$ 7˚†?Setπ˚ #sear[lrange§ É 0 end-1Ò%ewı[
D~Gend]; 4rooÜ{3obj! f# We d\F±internal re®"c"6*Eto $L ¥·# Now refcountf˙! 3 is “SApplyÄ.
§ ~” ' $ { 
¡ò ºÖÆ	πçZ tmodifie≤A _Æ 
ñÆ © Ï£ 	T ß f HO lenë8$® ≠!kez– dQUEpathÜ¢if {$len >™5± €uNE Ø°| ˘| S1 endõ Aincr-÷Z Crc " Oitem˙b) item· B D{keyÛ1} $Q ]*  1dkey eq⁄qΩ ±{EØ∏"$  2$leÁz& A Õ )¯KR$ô∂o # m 2set†"@ k [Clonƒ £ +
a ° 	 µ Ï	ú Í È≤src\} don't‡Cëany childÈÙ 	ìŒÒT
Ê À  } V%ŸÀ8kçMß ¿ø4 ªÉD€˙è˜	CÌ∂Ewrap”o C)u ‹(«6ë √6h~—∏	÷ uh  2q> mW"· ∂K ıœ$∏«/4 2.‚ûS ç	{x!rnode_va/ _
Es ""	úO «61
B$src†*÷ .◊ x# In thÇ]]T“ZnO¨†56 gAway,n	U
6srcO
lUode 1ˆï "geAífist key.S |CÉis used fzf>Òve case ($len>1)wC# 8bas B==1)± !see <	¥%˚˜´j n ∆ 	G _%asrc toå , S€ ´Å ñq_but_noc	2key∫ 9	WZ‹	
I	û 	&[
` sadd aga/1new: rjTcoriginc	XË 1å%z ÇCthe ™Ÿ‹?$/ﬂë>‡1!$†L]} {Q	0˙#."1E	·M‘G  2	 Ö,ˇ{offset "  "} {newline "\n"} {beginú€ëextoff "$2 $U d  clof "$^ $/   Rsp "  fÊN R ""]}‹ß!sp}Mò∂Rype [” ©äíswitch --
ºëboolean -S 4   #R{ 6/›(j Aget_’;pedRÇd
	null¯BC unull
	}^ Ò 
o Öset data€ q 
L Ú    # JSON permits•_1one‹l 	/ j   å1 i\n \\n>  V\t \\ô1 o\r \\r6 _b \\b _f \\f o\ \\\\ R" \\\O ]/ \\/6 y} $data –D!\"# &\"X øåΩvinner {( l&leFŒ¿DA\˙i«FiHblen} {»ZN î"ubP Dk / $Ω ˜√ [?$R ÊvYÿ]H
˛ ﬂÛ ^ ]XGæ p5"\[-2 V 0]\]àÙ  fí"\[$nlof[+A< , ]ç≤O K í&
ó +U◊ }nKkeyso]x nˆsubst {"$key":$spÄ|X M].‡ ñ}ò=$	U á{tá}÷á> CL#:ÂIêD# ü ˘Û	_ a
ª ,#¬Ûis plain old tcl}2!
#¯ÈD is œL#asBh;uﬂM5} -H Asimpdg´1, "ãΩB" it!rÉ's not aµZà
# {listD aÑ ∂!ofà&Bngs,8Rrt to?«'sA  F Flist, ?dicr 2dic, ' xô ) ? xxÑ 1 Qwhereâ]™ of key xxÚ N *M 	— _etc..±&°pile {specùÑwVwÊ:spe⁄"¥÷)E 0°º6pecp" k“2   'Î
ø!Ñû  ô~ **Ë ã	 ;L@—2‰  ™2keyè) ''&Cing_ÓRspec}— ; ˇ ∆NB ! $ I I$keyà$ [‚ c$key [∫7ˇ0$àÒ  •. I   §º
êM	 
> 	 #C+À∞	_ ∫√ = Z* 
≈ -z	≤GNlist°í2¸	U
Bpec q√Nitemg 
≥ ≤	6 bß  K ™sÛ
8 ì 	Y JY  M≤is double -7¯b  ï  #nukó (Ç3Badˆ:} O ‚ U Á 	  ≠?oolÓ 
” übool true”  L À7M 	¬ Á 	 ãÊ  Ÿ ; eqù/ ì  Onullç ’	≠ÅData mus_maÉ: '$data+1 ⁄ ¡sÍ t*°â 	Fy ‚ ê†+Kâ2ó! '§&'"*
 ë
Ù apply {{selfdir ZN " ‹*ìtypes.tclk%n8
``>H(re∫:D F?ëŒ>mUt%
}Û } [file dirname ìnormalize=£script]]]
A   &Úmkdoc.vfs/lib/yaml/__œ ^2 ^1202ËQ
 ^ø3 16436   0÷ & ﬂustar 00groth8    §H65valàŒ'% qxport *≈  #va≠öÔ∫7õ5	¬b# type$ÓÅX N9 U  paˇ˛<sEVkeys}o  _tag D w6 yeî L≤set Set} }
çj>’~∫{src key} {x Ò# get a sub-nodeÔ$· by "key" fromˇ⁄tagged-contenê	’8iü	-ÄËc ’4+ D{src] 323srcF {Fd\ â"	Ω Aı% H#H#aNÎ Q(1src‚ø
âî!* ŸH !::¬Óê>° ¥  É †nÉÉm 2fors}}† â?è–$<¥ É7 #Ù!è7 {hJX 	J$ ‡(unãA Ñ ÖÁç 
◊©  	∞î 6 ""vò 7 2  #*)CAfor 4	[ª J,{J,Ø,
Ω‚-1rc1_;	 S2]} {´ ¿, Û1k1l ™qÖÏ/Q$src2›1g Ÿ,![ﬁ-§1ıS T V»¨.
Á
07”sÅ?Ÿ
_§list] % 2}€
{Ìy! #+:Ôå"Ñ	V7 &?Öz ...?"}≈ L∫ 	XD }í Cl|-/ne0
√L≈
- Í√9‘ î# a O 	€ 
∞ ºÏ?3{*}8Lñ O` #A,d: all »Ns{è¶T é{ 
Û; 
©,] ˛ Ú 	'ƒ.
9'nZ	)*5[CPëL0 ΩåZ"@1"ThË	r '$key'p<§ literal oV‚"≈ A$M$srcWÖã
xnÇ≈%D £: 6 §oå
:5Ì	0 B[getf'püo ø”
è Œ Î&+ Õ    R•RaÉ SL¶ S) Tt 2Lis`%SeÅ " LC}9	´÷¯	¡
 à¶Arc $* ˇò
!ì
Á	i]Ò

©
i¿ Ø#óWm
ÿ HêB<Û!Í		R´	M˝h˝BmY[ïvcompare  tpresentﬂõA6] >á!Ã	)—¸
Ù
N ‹ ¿+ßò >Å# Manual%tlsàß'dat end@x* ÆÕ =Gv	˚9U	{°è	ô = y F D 	V X 	 Vo] ÎÁ‚$[l)Ä$´ U o

ï ãT © B[N2""]@ è A 7rLm ≠	RTD%èTY1 $i]c_2 $i]ÃFN< /å	» 6 1 .  ]~. =_	q=J≤ 	Í S  
 `˜L< &  gv¨H Ux˙° 7ú-‡ “ .L.C	0,5f ˙	/ ´ S0Cexpr≥8a>=0 &&1)	q w ™>3@aÖ •  æ  8/no' 6j ! S)"  €	ı
N Ö>
çé 9˝~ 1o2WÌ≥ 1§: 2‡	r Â¬ ÂaÖ Â1num¿  
Áò·k øÓ
Gy(¥!*sr≠& ˆ Ø!
¯¸å	Éerror "A%v '$src'_Jµ &M 
 	 S= 1 "S. 3==  S
N00÷OaÜ Btrue"# Otag e/®ÈW
Y
jq {	 ¨_expresion¡8 ^ Of {$3 ~µb=#ÍA ˆ4µ WV˛Zé '::¨ \ í ] 	S , æ 

± [Qbool1¬$* 1eq ù G$˝aFnull_ 5ull" K/ll¨%û Ü Y®Qnull1• ®Óø J O}
}
L!§ ° $ ˆl÷ / $%63∞	 p?617 pˇVQ# -*-11_-*-
#ãjomj #OO›Ù; # For 8.5. Integrat˘k=8.6W 3try; = 1. T.l.F ∆huddle 0.1.8ª 
k@:_ 0.2
øÄ B 	*		%,˙# ® {jsonTextFBset Y stBjson |pÑ parse $J ∂
$4G	 “ b * ìoo::classÕ0' JÉ  	ãtcursor ü Û EndOfTextException∏
!REi 	F ≤constructorà# ^	´Ω.==æ¬qthrow {¨8msgí V-( ◊-  $ 9msg™ 
œ 	- fLˆositiveRE {[1-9][[:digit:]]*_vˆcardinalRE "-?(?:$A :|0)XaJ!raÊn` .^ ’—^ ëexponentia ß{[eE][+-]?î 6  \fRE "${† V}(?:$~ )≠ 	a &)?Ø 	&# 3gbfor "EsßText" signòk¡ t 5[ }( m  cmethodf∞A_to_u#4setÔ-¬Ö ´E i É "myv π_next_json_´;
H ± íeekChar {Ê’ú<1} ∂ —dHë6dexOäŸ %+$L }ö ç¨C˛Ñ Dincr;b ” Í  g BnextÊ ◊ nµ b + 1 <C(2ng "„ ]]ì u  3w 	< ΩU$Ø
F   ¬assertNext {FHrgetÃ@ ‰ R 	5Í l!= $chÑ? ≈W a 8´ 9$chÉ 
ˆ  ±™ZAJSONñqr} "Try™tRo rea:£˜ã $atÕ ≠ÒK
n dî io ûâ6 ‘weatWhit/ 	* MUh [myÀ€,Óh≈2-1{Noë≥.Ò  
 	¢  	 ú9∏exact -- $c^X C"\{"c a!my¡O@ ¶'!?"\[U ZArrayST "T oStringU 	"o    "tU ,Tr® Q fQ _False•  R nR ONullQ  ü /R ÎLCommª. {Å  “ '-"ÎD /"0 1 2 3 4 5 6 7 8 9\9QreadN?/ ∞Å@, Ud"Input‡,hqJSON: 'ˇnText'"p 
o 
 ”Ö	OY# î>5tru/g gk’1	!s À¸9/ch*my		´ ◊X elseœ/2h 3K b~=gå û /	Ä¢{$  (myãtŒR ! r! u! e! ˙"::R" ˙ ï 	 ‹ -› f¨@ ﬁ a" ‡:D sD 	D ´ N«Iﬁ	
‡n—	z 
! u! l!  › äÜ ‡∑l⁄ 4 ¬á	9 1] /2]d /"/ÍD~sSolidusã 	Ö 
É ?"/*Á_StyleR ‰&NlE›" cΩ:\À ì
‡  Ü	‘ ÊA  
jz"/" "/*| # *#  y     try◊ 	# _M Ø~ ] > M " Aif {Z"]6g ¿ h ˘  "] Ê *M ÿÙ¡, '/*' canno‚?uembedde¶T'¥ØQÑ	 † è. D 	vO} onÅs$3ÇàI
⁄, expected */≠¶ ⁄ © E¨ ¸r # Ä ˚ N
Î&IA $chÕr1\r"Õ% ÄR	m  _ <a—	+ 
  Å n3~*\[Õ*my• ©/\]™ÄÔ	W7À 	 	ÿ  ªM4 –/€≠ Z

Q  > E6 íú Ûí
X, ßYarray~Ô due to: '$ch'ç C 3 2  Ö
 ù6≈	
ƒ
â Ëv F9◊
G .	 u˝v) ?:"\{≥ s	= w}vwÉ9¯ 6	ç l
&  ¬%
û8[àL‰8
á c OV	∑  R':w ÈeHhÍ#¨ c +
‡.¡-MK 
∏O Å ¨'_# ˛ˇ‘F”	 ˜•m
≈regexp -starÅeq bZ"_ Á	ÇG }Î 0 8 X { 	 „ ¶„ 7J*
+ —è À.0« 
œ¿î i õ 3 Kl"!\`   q5* "®˝	X ı"mâ  	—
?""}g@ù ´
oeq "\\ø
t {= /"b Ü :"\bÄ ) /"rl rl * ÿ nl *= l fl *˙ l tl *u∞[¯™â "%c" 0xZ q \\~o H"/" π O"\\"$ ı }
bescapeÊk©Tacter^/in	 #  ;G9P#[j	Òœê: Á  Y â*wc+
9 
™./ ﬂ 0 êù6 0q111215  04 14730 TˇU¢#
#   YAML°r◊âŒ±Ò  See http://www.‚org/spec/1.1/
C  πtcl,v 0.3.6(úx5:06:25!õ(ú{I◊+8”¢supports aP‘—limited subseT-r of the8ñspec.
#
#a01âõ%°]0.4.2¥0}cmdline 
Ã02nam`(xU!::R 4 ß0ëload setOé/Ú s dict2dump lis
 iú¬Ü,U}≠i{Àr# fixedFq groups:2som› z-types.W 5 ‚# a plane scal)¿Rworkea≥Ñmatching§…°verting toyÅspecific;Ve #|1Ssome_Tlå@#Êjqlist !!zV—$treatmented-æ@„OÕ¬#= ﬁ#i5≤&1rs
Ù #ÿ S/coll6h +„ ebÃ ryaml-taX0œ p|›{∞ £ ’ 1	AÇ› 6Ñ ﬁ Ù e	!W-U&7N!is⁄Z ä∫«    validate SçÒ{timestamp int float;"›#$#ˆ.˚z É!!binary3::_) B 'g"!!] % FFloa_Wm Âl ∞ m ) T ö J çshorthan≤ï!!!)O:Sñorg,2002:9 
 Pã ºnull:Value à ˆGroup  {null "" ~O 1   a? 
‚0Etrue> A<™on + yes yD DfalsE 
F E { ∂ off - no nE 
 ll‚_dumpIndent   CÇ
 “WordWrap 40

b—'
 EoptsÑf3[::y4::G*D«R{file+ ${i	)áfilenameôSs{stream+ 
/  - Rm.arg' A  ""n Cxed-ı{urs bulkì˘(null/true/false)L S:nullQ L ÚK E √C {""$ k"" ~}}N HtrueN N 1# %S µ T °  q}¢ 0$ 5
U @S U £ Ûˆ 7nopø}integerm	∏´6{toÕAthe ¢(not dumpek¥[K }º1] 2e¡ ;# Remove ?˜ú‚
¥à6n ≈TAB_IN_PLAIN§ DTabs.¡îused only‘ﬁBentsﬂ∫Úin quoted "..." '...'.ím    AT[ Å {Reserv #Údicators {@} can't …#inR BR `R ëSEQEND_NOZ ÖSEQ   {T\”Ò flow-sequence end '\]'Zl+in á[v, ...]± 7MAP_ ?MAP_ smapping^ }^  B{k: ` }` aANCHORø QFOUND7QCould£ “Úthe anchor-name(current-version, " Êîrefering"™-ﬁ
6ed)‘Ò MALFORM_D_QUOTEÈ{y#Apars‘ Qrror.€ #of" o·nssing?Y SY ESingY _|Y :TAG ‚b "$p1"∫OAe waîádeclaredcıINVALID_MERGE_KEY   {merge-key "<<1Rimpre
1 inÇø‰scope(e.g. in Q)h ZEj ª{malformed r Susing> R}
}

[√
 A
# PÚ`_ APIs# 
åQyaml2åU÷K	f$_g˙øK}Ÿ[◊aBlockN" aí#
;vz) åg(DÕπøj Êˆmap "{\n} {\\n}"Q 36Ä R˘jÅ }U?AÓ : √?◊ ÁT{argv)Ó’:≥oV[_imp	bs argv– - 4sôA i¢# Dump TCLNNqto YAML$öCyamlÒV"{iﬂ	í2} {wordwÕ	?
È: ˆ)X1*}$&# $K $H ô 	D {3 ~ !ò{*}$dicÄ }∆ ºYÑ 6set¨	Ò ◊& ‹°# Start atX^›ÓAand î¢through itpƒset out [joizÅs"---\n"Dﬂ £@u] "\n"]·`–1$ou…Õ1# Oú
' 
Z¬ı¿	ÅT( GrBü 
,bY\ l3setXC   $8 (Ç )' ¨ '  ) ≠ P  * Cdataù5  )rs q) åTÁæ ˜),1for™br{buffer%Rvò 3 ∏¢fd [open $= " ru    [<6$fd ëclose $fdDE|(7 )V #  π
)≥ Ñlength)  6 C y - ô	)Â Ωfinished) 0ƒÉ{√Ëèvqupvar 1¨ j≠ùï /op ågÊ•Í™ ˙#„	eMdFargc_S$iÖ+[›	ùQgetop< vk #s  
óVJúerr eq -1¸É-C :ü    "fileTÛãÿ$] "‚K 
+K F ´ó tg N œU O ( Ë L % õ ∞ìN	[$í{m:(\w+)}¿ƒ?ypeï91arg3"[ Ñ!($n}Û?) "§Ò,Ù∑,˘‰   ä ÷)‚[ < t1) $¨	 
'  
  
  Hó.
 + ˚≤	
˝ A
# S;É/Block C¢ #
3Tag g£-' r6J&taJæ ï˙ K  ¸ 	O Y!!strûèî#iròI$tag? ~ıTDinfohX≤ -($$©R $& X  °c˚ [_getErrorMessageà¯†'	œQ$pair€	ç_è FÌ{$ãH [„≥Å[expr {de9!($1 ))}ò¯â[ a≥abase64ƒ v N2[::$ Ñ::decode9” P¯
” ˘¥ "4	ˆ–>◊b * _plainy	X 
 }•G_toTo √@ 
Í Hg r$"eq$îsstr ""]≈set lowervalù	!to 	˘ î4typë}†éáWØ (Év)mI$* 	|  Aif {÷—Bpairõ vcontinu~.  ¯á4'nt≈ #ç: 1.Ω1 eÙ^-?\d[\d,]*\d$|^\d$}Ã @ Û regsub -all ","/ 4 ""[V ◊Sint $0 ´ ˝   Œƒ Û# don't run before "a ÿƒ v{L3Õ+sZM$val" Ô µ 2 
ﬂ 
 ,	A# !!Ôë!!true !!\^ „ó·˘=] \7 c && [lŸÏ$4 ! $toval] >íO
¨	E Ëv ˝
äd)F}*#Mß%ù5stra è2
# É4Nod’
q Ä&: 9 q{{statu0í%-1Ô7Ir4rev)™{Â i.&	Ä7pos 4tag›
x1›®≈≤9== $ W~	ÌÅ~ ¢    _skipS≤˚p2set€ScºbO,è C " ë ÏYeq "-:UAcc "> #c] 
ÊQif {"=A$cc"3---•;q KRe ´§%í_ungetc 2å g# [Spe Ú# Since people perceivx6"-"É1 as~>çntation,Q°# nested bA¿És may be= áxsone les
GK  Òto compensate, e¸Sø, of course $ifÇ ëinside an÷™ë q NPrÒ x
 
1.151A	 
?5£$ 7 9%L ;&M =6 ?= A(V"  ||ˆ$<=k¸} { ; # end documùÓ	=
¯µÿ	3"-"m 
ªi entrya 5posµ ! r# [196]. !l-U ˝ -seq-entry(n,c)4 E`Y2} [◊1Sub⁄˚ $pos "SEQUENCE"]Ú Í	\ $"?‹ gßy ~ ?nop| t :t Œ 	ò Ï	<‹ 1} {á(osIUÜrent+1}]— π i ª MAPPING¬ |¬ ¯t≈˝… &∞≠P–¨	; 
œ $">t FfoldH	8 ÖÌ s 
 r <r èmergeingg c™= ˘¯-<< ÿà Â ÿJ ó  \,=Qfø	sª e P R
Bne "≠ ]Pwl 'g
Ω
W ö	˛ æ
A} [_œÙ ExpandedAliasesÎg“>B∞ w π ∞- 1± 
Ó
 $"&äcnode'sç#è propertÑ$ hVToken÷
∆ 	Ç $"*b Qaliasiô	! U U És+	w!  ZALIAS9 @!*$Ä ö ì
? ∑ A…$ J 
à!&à.taÜ"agóë%k Ìdirective line˚ \_getL 
∑ Ö!ù ìÁÚ^[\[\]\{\}\"']$}Â]† ±D1 + Æ}WûÅ√ \	±BFlowˆ#!  Ì$d/ø@ ¯  °˙}¨NÃYq"BLOCK"y
Ì < ±?ö c?gw ä
Ë{à¯Æàeq "NODEJ6 JÅ	Apushxv5rev1`à%unO|  ≠ 
÷]øó‹#7îuW V Ohùprev] == úh~ C_set&∂_â
t%C Ê Òv ≈y ò f÷ W V # ûu3 0& Mz∑ + ˙ub√T f4 ƒπ"< d ı §∑j9e "o	\ µ QV d„] 	é∆f	« '_sem\ [ <  ^ C™!π{\ 5preÑ' “^o]Ç 5 Nprev>bÿ<◊=
Í+E˙*g C ááZ	Òg"\#Öype_nameâvÄ"	) ëeq "list"è Œ5mûû(ª´~íû
Œ%ubº "geœVue $iX cÔ¿ddó5 MÌ08 I ÿ LŒT[listw]€»C{pos
4new∆É$W ?‚æ˚dâis_blankµR >new˛O# ™1newÄ  w ÓÍÜÅkE€ —]≤Ñ9_ 73» 0∫á}∞G# „ B˜vLjnÔöuset keyò
»-2keyïÂéüÕè ò »÷J ú n® 
 Åìå	p$h U
}


^åaduplic¯Ï3savLk order~ ~_8 ,È	;Atmp ‰+Ì 	 2w	µõ2 !ì¥!Œtmp2($key)]}Fl2tmp2 ä wI ”.,Ò"|" (line separator is")
ﬂoing ">' ; ")O<jS{[,^ W)ıexplicit chompingF IX4z
Û q*5dchä)ƒrepeat " " $R ∂¥Eep $É B Ä y.c“}RDLinep G) Q< $ba!jT"""hPQfirstL ’, NOT ignoredXS(as aŸïV`"ngb∫%!rsdB‚Eue $r“ Ctop Ï8Ωi![_eofI†o#	”ˇ )¿G :Ä©sep "" sep# … *\n^˜Sy c‹#’m=4kip]« T f5 <=—	Ø fÍ 
≈ß ﬁ yö π$∞/# -ú∂6}]]›Õ≥ m @Apos]eXëstop} {_sÏƒ3 h\4- $eÌ w"strip" 6 +9kee ‚.°Î 89 *clT 9 	6}
	†=»
5"Sh˛61be E.Eed (« =” B)"
	Å  üÜ∫¡ 7&Ø# in {> |}œâ$ {ƒ&se∂Ú æ,◊›+§	=ˇ
t„
#p â digit]}»Ú~  	Ü $:   |…oQE   ;ñf7 ù <! X +X ?keeW wV °ú	ã q# Note:/ìped after≤;ao 	¬B5WE›	a# [162B1ns-•'b-multi=
m•	!InÂ%Ñ{loop 0}`† t== 5} {í ‘ “2¥=Qı _ÚreStr {(?:[^:#\t \n]*(?::[^ w+)*(?:# G *)*- y ÇQ_getFS
%$f ∫* *%DtrimÇ¢πÿ˚ ˆ"\nÈ #NA; # e-ú$lb’"lP	x* f	-]A nop‘  πÜ*≈ ◊ Fô(ùq !0]ıÏ ó X 	 ñ ü!lb;) % &y ±range $lb 1è>2 Rif {!I¥2õ m6fpol Ò á9 ==ñJ €’a K M
	zØ -!lb.-¯l®	8 f % Dsubsø± 
ox$loop+16sc‹sÃé ´˙result "$lb$subs	ú 
  /°&OFlow†&"ı	ü&∂j··Í{¢ ﬂå
,3&ÿ∆{‘"” n# 
5 ?En" ’	 ÷õl  YÓ ç
≠
€ õ $",Ÿ4end A πH"	!f}"eq≥  ß ƒâ	f 
´ 
 `r´a≥KDflowlM r8
up }*n ˆ"tu˝c /} °	\B]õ+%Ë4"\[± 
!Ï'"#	≤$]s Nq %e ó ‡C%ã˝Ö K èè	! ô◊rÂ `Å6+	õXDù	  
÷ f:  EA 
 º ˘ÒÑ´ ˛yKFLOW%6 ssn vÂ<} lr" "ÉR¢ó  ƒ 
‡ ø  X 7Ç ﬁ X qFk–% œq)-IS›
üﬂ∫ ΩP 1open9!¢  ¨Ñ ø-˝≤  l
D+ U	
0Åè	XtO K &i"q⁄  ˙ J K 
  -πãÎ:Lπ=,∑Lé∂ œ F>\»bsurrouo:-#Mm
ÍM  ¥ÍD7 WQuote[Ï ﬂK'Œm s*Km S7 m O"\t"Ç
=NX	?"@"∏
AkM5 `5 	B5 Ts# Planeı=	o"ifF	ã©äù¸S«jInFlow$—”	â 7j8		ÜjßJd 1 #0Ÿç&/a# [timkWÚnning at JST]
# 2001-12-15T02:59:43.1Zî Ë => 1008385183- D4t21- 0-05:00-  - ? -5Z 
%5 Ü 0Ü Z 4527á 2¥ 4"  ¥ è39791600«îU∫0$Èq2^\d - #} Ì	X®˜ÿErestr  {: 7 A ¥ÿ'im& a?:\d\d 
# Òzone {Z|[-+]\d\d?(?:' #)?NÛ%set canonical [subst -nobackslashes -nocommands {^($£ É)[Tt ]($å Ç)\.\d+ ? szone)?$2*Ÿ ?ttma ;(?:d S Kc::tcl_ØPd < 8.5â7å$Ê Åä∏dt tm zone]: C<V $Z/eqçWÓ"!!"bamp [c&7Ôcan "$dt $tm"]+f ,Z"û √·g | -gmt 1n ‹ 2ë{^([-+])(:B)$} ˆ Ònop sign d]} {set?˜ [format "$sign%02d:00" $d&µ ^ a\d\d):c )a 9h mô Uset m%Ûh > 0 ? $h*60 + $m : C- $mv é,Ò-$m}] minutes" -&∑PøÊET$dttmÛrmœ/tm‡≈ S
h V 7$dt‰ 
ip¯ ` É
ÍzAÛ}q  y ¡D≈Î°z83" -"˚{%Y-%m-%d %k:%M:%S %ZÚS { "6 { x wÇ QÕd9æ @- 63$dt0 0i '
 f !""I&∞ X$ {æ{ ﬁ]€=Gö0q2Ñ ´q{^%YAML4&h2	tøC A  8 Ì
X	v 2   ‹RYAMLV) 3) $òG 	.D3 c]}   {Ø!b
¥6ÙLLEGAL_YAML_DIRECTIVE^Æo{^%TAG6TAGO¶ 9 ìset handll4v Ÿ “!$|^!\w*!$} $7 /]}Ÿ "Å ï oprefixïï 	7 ï $ˆ ÊÄ`(È )] ª ÄX BTagHO÷
IokenÕ F 
ÿ1(!|]Ç)(.*)} $5 4nop¢[namedÌJÖ or non-1c'TaÉ˜œ b!)R# loc∞Q 
-W    !D j# yamlÉ 2  §r7 ! ú
 %*˝(öÉHt	#[k	y!<(.+)>ê;uriáÇVerbatimº ∑ £ .r{^[\w:/®6€K ® õTAG_HANDL»Î C  ]Ü€;!<$A$q>Ù4oubJí# capture˚\dÀsUwith ~n.–z#a(?:\")É#ƒ\\\"]*(?:\\. 2)*)" •]=  ]k#·* „z2˜]]0≥# [116] nb-Ôe#ÂIı{[ \t]*\n[\t ]*}ÆC"\r"„`ç	5 ñ([^\r])\r0 5{\1a1 ( ?, 9"\n\ ≤ d2] s-s≥ Æo"(n˘$#œ] $.(K7'R ???)ÆÒ
# chop off outer ""s and eVituteÈmA# Th J¡es more than\&4RFCµ&ed8 !EÇ# but itC 2covõ&3m avât'Gppedé‡4-noësµI·#1“‰7"$^ cXúŸ'ÿ'’!''
 —'–SS– 2–R–â¸5''}8'ß%∆T {'} ΩA Ê“q
# [155§(3 nb•(char-in*
ıQsep {2(,¶<º
Å[^$sep:# c( b(* H [x›	p(‘
!.© Ws∏(
ò(KƒÅ_getc 0]Ê#”	-*Ä $"$` ¶S]uÒ µ4 brGenericUYlL†){≥…ˆ T[z-¿[) fstart)6(ìb $buff 
Y 3÷
]K1Ü†(%enÄ v[5
Èöπ51}{N|	ÚßŒ ∞E)§Vlen -y aY §∑üAincrÜ+éeC) $lˆ ·" 4  ¸˚ƒ5pacò3#edJFproc	`ÿ°
,b Ó©•^[^ \t\n,\Ÿù Œ+@$- +Ö3 {{28Ski“,ù  (àSindexsÅü gˇ Û%±ò/" *(≤&M  b2ó{: 	0F) ^ #^ òÅÌ ¿  · }Ø1Ç
		# AnyYQ.y¬, do nothing3 
R ü) 7(-1"--2of lmÙ(line-end trimed)
# (cannotñ#ê/∞Cœ {{scrolled wQƒPK[	|Rüïapos ==ò^U B Ó)o 5ine/ q œEpos-ó,Å 2	≈NF „¸P©.\8$ *‹c p¿.ûf®ià ◊É$pos + 1w»* ≤ 9*„ èû5X É.eÑ Í W	ˇG Ö $space]†∞˙ 4 0] ]4ËRf
¬z” ?‰  -1 : 0}m LineNumm 	è5revœ o0u ±Å#a[split\vå0]î cV˛lõ zaw¨l !eqø .å	”‘m ¨o ¿ Hh?eof¿	? 	-‘#||-∫ñ1µ)8gR8¢√[ ÌsG =O¸ ÏrF ^ $posK 	*o {{len≥»·-ÿA$ ò& f{<t®:&© ”
’{&2end|Çd feplace. áRa¡Rﬁ Æ˜
2G-É 	«Aò˜N# 0h’5 ¬)cV⁄ ÓÀ0lﬂ˜±s‰,{ÒEî#Ω]/ ":$ 1) $9 |F-b \ Û©b j ]Ú.rÿÃP ≥ 	óx{ID {p19¶lª2num;À[p1 !=N!ô «"line($num):≥$¢"$u T($ID)BZ 8 Pq}

# Fi∂'#nd39sêŒ7Ùëof a YAML\	ÒpxT{line·— catch [˙1-in‚-- {^\s{1,}} "	"+∏ ê∏o¶›S] - 3z:\2#
#To1ers·"#ıÆBimp_&bnœdata {offsetÛayÜCset œË2 "$9 π jAW{ } $8 ∂h[É  \)j]‰9<,ngæå›&
ãDBdataU ]ä bScalar' “‚/ ]”,Olist{ ˚„¿6 =Hé @HG8subÛ \ CH. %epO	f2sub,	1" ?j:c ñ+¯ —oı - $sepÿo6subÜÂ3] "Ó n”b $o po1	
 O"dicû…B¢Ê °u rÌF 0 tW_$key:x_öRa¡£›k
èÜ{> vAõï$  L?/ ªh ,||+ /: + -+ Ñ ê3_doèB‰'Û
<ÇS[_doF G8 ™ïCreates aòŒ†Yafor duÚF}î IFAåU	”!wVLF""|-Q; P  0/îV -W _≤UlodedU ˚S ß"ï  ÑtrimrighJM∑ËêÂGZ 
H„ $ #\nÕa ¢µ∞ Í8 øtFolds aÍÇof text,É^}cessary¿ªi	¥∫Ä1# D≠fado any,D if …v£ is set to$◊	G ¡÷ ye fCç% 3] >⁄ú }Drset wraãÛ _simple_justifyA > % "Ç"Ã
n:%">  $Z "© ´bî˚http://wiki.tcl.tk/1774áú ˚{text width {wrap \n} {cut&2Rbrk "Ç –	6{}}w5ëtext] > $\ , ¥&exµbí √*Å$brk+1}]¡ˇ  R † À3lasıJL É eoç$brk < 0≥>=cut4 JB˝ B$tex» `% π ú[∆ Ø 
4  ˛7Hb DÅ0 $brk] @B > 
ù ¡ *AkãRTYPESÄ s  èâd::typeó7# 5>(°Çø " -  BuperØπ6dicëÛ publicMethods {f ≥    tag !!m  √4yes"Œ∫C h {argsÜ= 5f {Íá$args] %ÇTÚ{wrong # args: s»I%be=◊^ C?key›ÿ{Œ 	•EB }ä . Í
ELÈ	Q [arg≠cV_to_n“o%6G
†
ï‰OX,!mafsultL]E w 2$N {
	zBlist\_ } ˘  Sseq
	§ 	? 
@¢Yûô/	í4seq°íDëmakeChildqV84tagÒset full_path_to_‰	˚q::$type∫Ï$; œmGc@TYPE@ö8ø@TAG@ $tag]!	,AClasqàw &no{ XM¥	W… C
}

ëÁˆ& qN [O £4strµÄ 2 ﬂ3%!! > f¨tët6 #in‰p2 Cnull“o4 ¯oOtrue4 Efals-p6 gç"!!	 8 €8„8_]


  ˇˇˇˇˇ_P         Íq˙ƒ